# Envoy Release v1.32.0

[release note](https://www.envoyproxy.io/docs/envoy/latest/version_history/v1.32/v1.32.0)

## behavior_changes

**category**   : behavior_changes  
**area**       : tracing  
**summary**    : opentracing: remove legacy open tracing extension (#35418)  
**commit**     : [a6848603acf28017f9194789b01d16c6c1782e3e](https://github.com/envoyproxy/envoy/commit/a6848603acf28017f9194789b01d16c6c1782e3e)  
**pr**         : [35418](https://github.com/envoyproxy/envoy/pull/35418)  
**description**:  
Removed support for (long deprecated) opentracing.  See `issue 27401 <https://github.com/envoyproxy/envoy/issues/27401>`_ for details.   
 
---

**category**   : behavior_changes  
**area**       : golang  
**summary**    : golang: allow accessing {request,response}/{headers,trailer} in the OnLog phase (#34810)  
**commit**     : [69ee8cf7b5f5d6843d2f20c0149d3f2e55ea9e66](https://github.com/envoyproxy/envoy/commit/69ee8cf7b5f5d6843d2f20c0149d3f2e55ea9e66)  
**pr**         : [34810](https://github.com/envoyproxy/envoy/pull/34810)  
**description**:  
Change ``OnLogDownstreamStart``, ``OnLogDownstreamPeriodic`` and ``OnLog`` methods so that user can get the request/response's headers and trailers when producing access log.   
 
---

**category**   : behavior_changes  
**area**       : http  
**summary**    : add http1-safe max_connection_duration for http connection manager (#35209)  
**summary**    : docs: cleanups for release (#36535)  
**summary**    : Allow multiplexed upstream servers to half close the stream before the downstream (#34461)  
**commit**     : [5b22dced91c062fc409153777c287f053dac0cbe](https://github.com/envoyproxy/envoy/commit/5b22dced91c062fc409153777c287f053dac0cbe) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0) [779e69e6d2f9510eacab35c7a556a3b24453f735](https://github.com/envoyproxy/envoy/commit/779e69e6d2f9510eacab35c7a556a3b24453f735)  
**pr**         : [35209](https://github.com/envoyproxy/envoy/pull/35209) [36535](https://github.com/envoyproxy/envoy/pull/36535) [34461](https://github.com/envoyproxy/envoy/pull/34461)  
**description**:  
Allow HTTP/2 and HTTP/3 upstream servers to half close the stream before the downstream. This enables bidirectional gRPC streams where server completes streaming before the client. Behavior of HTTP/1 or TCP proxy upstream servers is unchanged and the stream is reset if the upstream server completes response before the downstream. The stream is also reset if the upstream server responds with an error status before the downstream. This behavior is disabled by default and can be enabled by setting the ``envoy.reloadable_features.allow_multiplexed_upstream_half_close`` runtime key to true.   
 
---

**category**   : behavior_changes  
**area**       : http  
**summary**    : Allow multiplexed upstream servers to half close the stream before the downstream (#34461)  
**summary**    : docs: cleanups for release (#36535)  
**summary**    : add http1-safe max_connection_duration for http connection manager (#35209)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [779e69e6d2f9510eacab35c7a556a3b24453f735](https://github.com/envoyproxy/envoy/commit/779e69e6d2f9510eacab35c7a556a3b24453f735) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0) [5b22dced91c062fc409153777c287f053dac0cbe](https://github.com/envoyproxy/envoy/commit/5b22dced91c062fc409153777c287f053dac0cbe) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [34461](https://github.com/envoyproxy/envoy/pull/34461) [36535](https://github.com/envoyproxy/envoy/pull/36535) [35209](https://github.com/envoyproxy/envoy/pull/35209) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Added HTTP/1-safe option for [max_connection_duration](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-httpprotocoloptions-max-connection-duration) in HttpConnectionManager. When enabled, ``max_connection_duration`` will only drain downstream HTTP/1 connections by adding the ``Connection: close`` response header; it will never cause the ``HttpConnectionManager`` to close the connection itself.  Defaults to off (allows "unsafe" connection closing) but is configurable via [http1_safe_max_connection_duration](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-http1-safe-max-connection-duration).   
 
---

**category**   : behavior_changes  
**area**       : eds  
**summary**    : xDS: enable envoy.restart_features.use_eds_cache_for_ads by default (#35696)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [06a20dd6ec9f5bd7c6a9e75cc1f54ee0396e7699](https://github.com/envoyproxy/envoy/commit/06a20dd6ec9f5bd7c6a9e75cc1f54ee0396e7699) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35696](https://github.com/envoyproxy/envoy/pull/35696) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Enabling caching of EDS assignments when used with ADS by default (introduced in Envoy v1.28). Prior to this change, Envoy required that EDS assignments were sent after an EDS cluster was updated. If no EDS assignment was received for the cluster, it ended up with an empty assignment. Following this change, after a cluster update, Envoy waits for an EDS assignment until [initial_fetch_timeout](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/core/v3/config_source.proto.html#envoy-v3-api-field-config-core-v3-configsource-initial-fetch-timeout) times out, and will then apply the cached assignment and finish updating the warmed cluster. This change can be temporarily disabled by setting the runtime flag ``envoy.restart_features.use_eds_cache_for_ads`` to ``false``.   
 
---

**category**   : behavior_changes  
**area**       : stats scoped_rds  
**summary**    : Add tag extraction rule for SRDS stats (#35527)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [9ea5239ce2ab74a355f1a58ffdcc698823f1aebd](https://github.com/envoyproxy/envoy/commit/9ea5239ce2ab74a355f1a58ffdcc698823f1aebd) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35527](https://github.com/envoyproxy/envoy/pull/35527) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Added new tag extraction so that scoped rds stats have their ``scope_route_config_name`` and stat prefix extracted.   
 
---

**category**   : behavior_changes  
**area**       : http  
**summary**    : internal_address_config: change the default to be more secure for service mesh environments  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [0ee424bb06bbeb97549788946f392f9110ac1e33](https://github.com/envoyproxy/envoy/commit/0ee424bb06bbeb97549788946f392f9110ac1e33) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
The default configuration of Envoy will continue to trust internal addresses while in the future it will not trust them by default. If you have tooling such as probes on your private network which need to be treated as trusted (e.g. changing arbitrary ``x-envoy`` headers) please explictily include those addresses or CIDR ranges into [internal_address_config](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-internal-address-config) See the config examples from the above ``internal_address_config`` link. You can turn up or test the upcoming internal address defaults by setting runtime guard ``envoy.reloadable_features.explicit_internal_address_config`` to ``true``.   
 
---

**category**   : behavior_changes  
**area**       : http  
**summary**    : Change filter and access logger order in access_log_handlers_ (#35959)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [4d99ab1627a9b847b6cd5fba3e4a816b1f5b883c](https://github.com/envoyproxy/envoy/commit/4d99ab1627a9b847b6cd5fba3e4a816b1f5b883c) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35959](https://github.com/envoyproxy/envoy/pull/35959) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Access log handlers added by filters will now be evaluated before access log handlers that configured in the [access_log](). This change can be disabled by setting the runtime guard flag ``envoy.reloadable_features.filter_access_loggers_first`` to ``false``.   
 
---

**category**   : behavior_changes  
**area**       : monitoring  
**summary**    : execution context: refactored the impl to use marco to enable the execution context (#36277)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [4dd017e89eace3b9aa6a54cfcb5d9d240d73cce6](https://github.com/envoyproxy/envoy/commit/4dd017e89eace3b9aa6a54cfcb5d9d240d73cce6) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [36277](https://github.com/envoyproxy/envoy/pull/36277) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Removed runtime feature flag ``envoy.restart_features.enable_execution_context``. The execution context feature can instead be enabled by setting compile option ``--define=execution_context=enabled``.   
 
---

## minor_behavior_changes

**category**   : minor_behavior_changes  
**area**       : command line options  
**summary**    : Make incompatible command-line args an error (#35570)  
**commit**     : [3e7cc5aba2075d6f3a78b75df5d0157a7dd09377](https://github.com/envoyproxy/envoy/commit/3e7cc5aba2075d6f3a78b75df5d0157a7dd09377)  
**pr**         : [35570](https://github.com/envoyproxy/envoy/pull/35570)  
**description**:  
[--enable-fine-grain-logging](https://www.envoyproxy.io/docs/envoy/latest/operations/cli#cmdoption-enable-fine-grain-logging) and [--component-log-level](https://www.envoyproxy.io/docs/envoy/latest/operations/cli#cmdoption-component-log-level) were incompatible in that one would make the other ineffective. Setting both options at once is now an error, to reduce potential confusion.   
 
---

**category**   : minor_behavior_changes  
**area**       : tcp  
**summary**    : tcp conn pool: honor connection_pool_per_downstream_connection (#34763)  
**commit**     : [be2a434735ab708d0bd87073e9db467e6d7857ba](https://github.com/envoyproxy/envoy/commit/be2a434735ab708d0bd87073e9db467e6d7857ba)  
**pr**         : [34763](https://github.com/envoyproxy/envoy/pull/34763)  
**description**:  
Added support for [connection_pool_per_downstream_connection](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-connection-pool-per-downstream-connection) flag in tcp connection pool.   
 
---

**category**   : minor_behavior_changes  
**area**       : http3  
**summary**    : envoy: allowing alt-svc from IPs, fixing HTTP/3 cert bypass (#35551)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [aa8d0f7d7a2866b5f81dfe46e975b80de26a0669](https://github.com/envoyproxy/envoy/commit/aa8d0f7d7a2866b5f81dfe46e975b80de26a0669) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35551](https://github.com/envoyproxy/envoy/pull/35551) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
The ``ACCEPT_UNTRUSTED`` option now works more consistently for HTTP/3 requests. This change is guarded by ``envoy.reloadable_features.extend_h3_accept_untrusted``.   
 
---

**category**   : minor_behavior_changes  
**area**       : http3  
**summary**    : envoy: allowing alt-svc from IPs, fixing HTTP/3 cert bypass (#35551)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [aa8d0f7d7a2866b5f81dfe46e975b80de26a0669](https://github.com/envoyproxy/envoy/commit/aa8d0f7d7a2866b5f81dfe46e975b80de26a0669) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35551](https://github.com/envoyproxy/envoy/pull/35551) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
HTTP/3 ``alt-svc`` headers will now be respected from IP-address-based hostnames. This change is guarded by runtime guard ``envoy.reloadable_features.allow_alt_svc_for_ips``.   
 
---

**category**   : minor_behavior_changes  
**area**       : lua  
**summary**    : Lua: add option to put backpressure when script executes httpCall (#35104)  
**summary**    : release: Changelog cleanups (#36595)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [6fb1903cd2eef4876cb9d333792d3778948ba455](https://github.com/envoyproxy/envoy/commit/6fb1903cd2eef4876cb9d333792d3778948ba455) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35104](https://github.com/envoyproxy/envoy/pull/35104) [36595](https://github.com/envoyproxy/envoy/pull/36595) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
When Lua scripts execute ``httpCall``, backpressure is now exercised when receiving body from downstream client. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.lua_flow_control_while_http_call`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : ext_proc  
**summary**    : Ext_proc: Enable sending body without waiting for header response in STREAMED mode (#35850)  
**commit**     : [1a153166a6d1e9336ee8982d1a00ba98655c9d39](https://github.com/envoyproxy/envoy/commit/1a153166a6d1e9336ee8982d1a00ba98655c9d39)  
**pr**         : [35850](https://github.com/envoyproxy/envoy/pull/35850)  
**description**:  
Added support for [send_body_without_waiting_for_header_response](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-send-body-without-waiting-for-header-response).   
 
---

**category**   : minor_behavior_changes  
**area**       : http  
**summary**    : http: modify authority validation to allow @ character (#35602)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [c61838567f214812b991f0c76db935a54300d94a](https://github.com/envoyproxy/envoy/commit/c61838567f214812b991f0c76db935a54300d94a) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35602](https://github.com/envoyproxy/envoy/pull/35602) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Modified the authority header value validator to allow the same characters as oghttp2 plus the ``@`` character. This is compliant with nghttp2, and supports the HTTP/1 use-cases that allow ``user-info@`` as part of the authority. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.internal_authority_header_validator`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : sni  
**summary**    : Account for route-level host manipulation in auto-sni/auto-san-validation (#35566)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [4e0af00e54be34f69ed83b91e11fdd999b9d5602](https://github.com/envoyproxy/envoy/commit/4e0af00e54be34f69ed83b91e11fdd999b9d5602) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35566](https://github.com/envoyproxy/envoy/pull/35566) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
When computing SNI and SAN value for the auto-sni and auto-san verification feature, route host manipulations are now taken into account. This behavior can be reverted by setting the runtime guard ``envoy_reloadable_features_use_route_host_mutation_for_auto_sni_san`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : aws  
**summary**    : aws: flip async provider runtime guard to default true (#35747)  
**summary**    : release: Changelog cleanups (#36595)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [6277f4601357550b0eba93fa3fd2a4154d63416b](https://github.com/envoyproxy/envoy/commit/6277f4601357550b0eba93fa3fd2a4154d63416b) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35747](https://github.com/envoyproxy/envoy/pull/35747) [36595](https://github.com/envoyproxy/envoy/pull/36595) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
AWS request signing common code now uses the HTTP async client by default, moving curl to the deprecation path. This behavior change can be reverted by setting the ``envoy_reloadable_features_use_http_client_to_fetch_aws_credentials`` runtime flag to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : quic  
**summary**    : quic: Connect client UDP sockets before usage (#35652)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [4ab5cfa030a6cd81b44463a51da967fafe081957](https://github.com/envoyproxy/envoy/commit/4ab5cfa030a6cd81b44463a51da967fafe081957) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35652](https://github.com/envoyproxy/envoy/pull/35652) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
UDP client connection sockets are now connected before use and sockets will only bind if the local address is specified. This behavior change can be reverted by setting the ``envoy_reloadable_features_quic_connect_client_udp_sockets`` runtime flag to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : http_11_proxy  
**summary**    : http_11_proxy: Make inner transport_socket config optional (#36414)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [c6761de5f33e97758471c6b973a57a5c2e5db925](https://github.com/envoyproxy/envoy/commit/c6761de5f33e97758471c6b973a57a5c2e5db925) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [36414](https://github.com/envoyproxy/envoy/pull/36414) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Made the inner ``transport_socket`` field optional in the proto configuration.   
 
---

**category**   : minor_behavior_changes  
**area**       : conn_handler  
**summary**    : conn_handler: enhance listener filter chain execution (#35394)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [7ffff7aa7390581bb02cbc6ebbbfa267fc7e1945](https://github.com/envoyproxy/envoy/commit/7ffff7aa7390581bb02cbc6ebbbfa267fc7e1945) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35394](https://github.com/envoyproxy/envoy/pull/35394) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Enhanced listener filter chain execution to handle the case that listener filter has ``maxReadBytes()`` of 0, but may return ``StopIteration`` in ``onAccept`` to wait for asynchronous callback.   
 
---

**category**   : minor_behavior_changes  
**area**       : tracers  
**summary**    : Set status code base on GRPC status code for OpenTelemetry tracers (#36173)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [b69d1f596755cd1957c41b3202da5f507851a780](https://github.com/envoyproxy/envoy/commit/b69d1f596755cd1957c41b3202da5f507851a780) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [36173](https://github.com/envoyproxy/envoy/pull/36173) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Set status code based on gRPC status code for OpenTelemetry tracers (previously unset).   
 
---

**category**   : minor_behavior_changes  
**area**       : xds-failover  
**summary**    : xds-failover: disable moving to primary after fallback responds (#36386)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [9ad582a7a93d7f665aa234140f43c589a14ab0ef](https://github.com/envoyproxy/envoy/commit/9ad582a7a93d7f665aa234140f43c589a14ab0ef) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [36386](https://github.com/envoyproxy/envoy/pull/36386) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Add the ability to stick with either the primary or the failover xDS sources once Envoy connects to one of them. To use the prior behavior, set the runtime flag ``envoy.reloadable_features.xds_failover_to_primary_enabled`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : http2  
**summary**    : flip oghttp flag  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [285a4084236bc6112079bfc1e23ee8186db9a545](https://github.com/envoyproxy/envoy/commit/285a4084236bc6112079bfc1e23ee8186db9a545) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Changed the default value of ``envoy.reloadable_features.http2_use_oghttp2`` to ``false``. This changes the codec used for HTTP/2 requests and responses to address to address stability concerns. This behavior can be reverted by setting the feature to ``true``.   
 
---

**category**   : minor_behavior_changes  
**area**       : udp  
**summary**    : Reapply "udp: set Don't Fragment(DF) bit in IP packet header (#36341)" (#36437)  
**summary**    : release: Changelog cleanups (#36595)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [78f832db10751bb803f6a339f7515d7e1d724c8f](https://github.com/envoyproxy/envoy/commit/78f832db10751bb803f6a339f7515d7e1d724c8f) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [36341](https://github.com/envoyproxy/envoy/pull/36341) [36595](https://github.com/envoyproxy/envoy/pull/36595) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Envoy now sets the Don't Fragment (``DF``) flag bit on IP packet header on UDP listener sockets and QUIC upstream connection sockets. This behavior can be reverted by setting ``envoy.reloadable_features.udp_set_do_not_fragment`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : access_log  
**summary**    : escape invalid host name  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [30c7d6cda5d4afafeeecb0ccb85b91c7c86b010c](https://github.com/envoyproxy/envoy/commit/30c7d6cda5d4afafeeecb0ccb85b91c7c86b010c) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Sanitize SNI for potential log injection. The invalid character will be replaced by ``_`` with an ``invalid:`` marker. This behavioral change can be temporarily reverted by setting runtime guard ``envoy.reloadable_features.sanitize_sni_in_access_log`` to ``false``.   
 
---

## bug_fixes

**category**   : bug_fixes  
**area**       : upstream  
**summary**    : Fix healthchecks that do not persist when priority is changed (#35748)  
**commit**     : [0a00922c6ebd23cc8e56612be66e3193d175e504](https://github.com/envoyproxy/envoy/commit/0a00922c6ebd23cc8e56612be66e3193d175e504)  
**pr**         : [35748](https://github.com/envoyproxy/envoy/pull/35748)  
**description**:  
Use previously calculated healthcheck when endpoints move priority levels repeatedly.   
 
---

**category**   : bug_fixes  
**area**       : dispatcher  
**summary**    : dispatcher: make `approximateMonotonicTime()` more accurate (#35810)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [db0544021362e3e94fc1d0e0437c7208b7072f19](https://github.com/envoyproxy/envoy/commit/db0544021362e3e94fc1d0e0437c7208b7072f19) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35810](https://github.com/envoyproxy/envoy/pull/35810) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Update approximate now after polling instead of before polling. This is only used by QUIC. The behavior can be reverted by setting ``envoy.restart_features.fix_dispatcher_approximate_now`` to ``false``.   
 
---

**category**   : bug_fixes  
**area**       : dns  
**summary**    : dns: don't respond with FORMERR if message has ID 0 (#35129)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [b8ae3ab32964bb200894f6fc11ffe3cfbcdd9335](https://github.com/envoyproxy/envoy/commit/b8ae3ab32964bb200894f6fc11ffe3cfbcdd9335) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35129](https://github.com/envoyproxy/envoy/pull/35129) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
The DNS filter no longer returns ``FORMERR`` if a message has an ``ID`` of 0.   
 
---

**category**   : bug_fixes  
**area**       : quic  
**summary**    : quic: fix access log `%CONNECTION_ID%` (#35416)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [fb023232e5a9a235fe3927b766cb42d559ceaf1b](https://github.com/envoyproxy/envoy/commit/fb023232e5a9a235fe3927b766cb42d559ceaf1b) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35416](https://github.com/envoyproxy/envoy/pull/35416) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Fixes access log formatter ``%CONNECTION_ID%`` for QUIC connections.   
 
---

**category**   : bug_fixes  
**area**       : c-ares  
**summary**    : c-ares gRPC library: fix a bug impacting gRPC's use of c-ares (#35487)  
**commit**     : [3f6a8c0f95a014550d1d8df5c849df36f9078b96](https://github.com/envoyproxy/envoy/commit/3f6a8c0f95a014550d1d8df5c849df36f9078b96)  
**pr**         : [35487](https://github.com/envoyproxy/envoy/pull/35487)  
**description**:  
Applying a C-ares patch to fix DNS resoultion by the Google gRPC library.   
 
---

**category**   : bug_fixes  
**area**       : websocket  
**summary**    : Websocket: Fixed not ignoring of disabled filter for Websocket (#35292)  
**commit**     : [cfedcdbc0bf1e687d0fc2ad243e7277ed004673d](https://github.com/envoyproxy/envoy/commit/cfedcdbc0bf1e687d0fc2ad243e7277ed004673d)  
**pr**         : [35292](https://github.com/envoyproxy/envoy/pull/35292)  
**description**:  
Fixed a bug where the websocket upgrade filter would not take into account per-filter configs.   
 
---

**category**   : bug_fixes  
**area**       : ext_proc  
**summary**    : ext_proc: runtime guard for timeout error (#35475)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [71244bf6fec05936625e2a15ef99931a1d1988f9](https://github.com/envoyproxy/envoy/commit/71244bf6fec05936625e2a15ef99931a1d1988f9) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35475](https://github.com/envoyproxy/envoy/pull/35475) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Add runtime guard for timeout error code ``504 Gateway Timeout`` that is returned to downstream. If runtime flag ``envoy.reloadable_features.ext_proc_timeout_error`` is set to ``false``, old error code ``500 Internal Server Error`` will be returned.   
 
---

**category**   : bug_fixes  
**area**       : rbac  
**summary**    : Reapply "implement per-route override for rbac stat prefixes (#35531)… (#35693)  
**commit**     : [40dddc9ee82e63ef06903efac822a08e031473b6](https://github.com/envoyproxy/envoy/commit/40dddc9ee82e63ef06903efac822a08e031473b6)  
**pr**         : [35531](https://github.com/envoyproxy/envoy/pull/35531)  
**description**:  
RBAC will now allow stat prefixes configured in per-route config to override the base config's stat prefix.   
 
---

**category**   : bug_fixes  
**area**       : http2  
**summary**    : http2: fix reported protocol error from graceful upstream close (#36205)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [bb22882dc51b9e41ad1b1fc78e1258c17df3e3ec](https://github.com/envoyproxy/envoy/commit/bb22882dc51b9e41ad1b1fc78e1258c17df3e3ec) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [36205](https://github.com/envoyproxy/envoy/pull/36205) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Fixed bug where an upstream that sent a ``GOAWAY`` and gracefully closed a connection would result in an increment of the cluster stat ``upstream_cx_protocol_error`` and setting the ``UpstreamProtocolError`` response flag. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.http2_no_protocol_error_upon_clean_close`` to ``false``.   
 
---

**category**   : bug_fixes  
**area**       : http3  
**summary**    : Make http3 codec not encode empty trailers block (#35907)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [b5bc27399d723806bab993895e64f9295c863016](https://github.com/envoyproxy/envoy/commit/b5bc27399d723806bab993895e64f9295c863016) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35907](https://github.com/envoyproxy/envoy/pull/35907) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Fixed a bug where an empty trailers block could be sent. This would occur if a filter removed the last trailer - a likely occurrence with the ``grpc_web_filter``. This change makes HTTP/3 behave the same way HTTP/2 does, converting an empty trailers block to no trailers. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.http3_remove_empty_trailers`` to ``false``.   
 
---

**category**   : bug_fixes  
**area**       : http  
**summary**    : Separate state for tracking downstream end_stream in filter manager and HCM (#35815)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [09501db4f475ea8e2f0bec719ff7dc4d591bb8c4](https://github.com/envoyproxy/envoy/commit/09501db4f475ea8e2f0bec719ff7dc4d591bb8c4) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35815](https://github.com/envoyproxy/envoy/pull/35815) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Fixed a bug where an incomplete request (missing body or trailers) may be proxied to the upstream when the limit on the number of requests per I/O cycle is configured and an HTTP decoder filter that pauses filter chain is present. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.use_filter_manager_state_for_downstream_end_stream`` to ``false``.   
 
---

**category**   : bug_fixes  
**area**       : upstream  
**summary**    : Using drop_overload category in EDS to report drop_overload stats in LRS (#36047)  
**commit**     : [6069f86c529d9ee3712cdd5f7cb738d3f4fb1acf](https://github.com/envoyproxy/envoy/commit/6069f86c529d9ee3712cdd5f7cb738d3f4fb1acf)  
**pr**         : [36047](https://github.com/envoyproxy/envoy/pull/36047)  
**description**:  
Fixed a bug using hard coded drop category when reporting drop_overload stats to the load report service. It is changed to use drop category that is set in [category](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/endpoint/v3/endpoint.proto.html#envoy-v3-api-field-config-endpoint-v3-clusterloadassignment-policy-dropoverload-category).   
 
---

**category**   : bug_fixes  
**area**       : proxy_filter  
**summary**    : proxy_filter: Fix the CONNECT implementation when the hostname contains a port number (#36072)  
**commit**     : [8cd214daaf858a5e698494a5a667f31978531c18](https://github.com/envoyproxy/envoy/commit/8cd214daaf858a5e698494a5a667f31978531c18)  
**pr**         : [36072](https://github.com/envoyproxy/envoy/pull/36072)  
**description**:  
Fixed a bug in the ``CONNECT`` implementation that would cause the ``CONNECT`` request created to be invalid when the hostname contains a port number. When the port number is not specified, the port 443 will be automatically added. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.proxy_ssl_port`` to ``false``.   
 
---

**category**   : bug_fixes  
**area**       : runtime  
**summary**    : runtime: load rtds bool correctly as true/false instead of 1/0 (#36044)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [cd3346d541c9866bb60a26730da5edd13a2edfdc](https://github.com/envoyproxy/envoy/commit/cd3346d541c9866bb60a26730da5edd13a2edfdc) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [36044](https://github.com/envoyproxy/envoy/pull/36044) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Fixed an inconsistency in how boolean values are loaded in RTDS, where they were previously converted to ``1``/``0`` instead of ``true``/``false``. The correct string representation (``true``/``false``) will now be used. This change can be reverted by setting the runtime guard ``envoy.reloadable_features.boolean_to_string_fix`` to ``false``.   
 
---

**category**   : bug_fixes  
**area**       : jwt  
**summary**    : jwt: fix clear route cache with remote JWKs  
**commit**     : [5550967f21ffc621609a573a085ffb97311332b7](https://github.com/envoyproxy/envoy/commit/5550967f21ffc621609a573a085ffb97311332b7)  
**pr**         :  
**description**:  
Fixed a bug where using ``clear_route_cache`` with remote JWKs works incorrectly and may cause a crash when the modified request does not match any route.   
 
---

**category**   : bug_fixes  
**area**       : http_async_client  
**summary**    : fix local reply in async client and destroy order  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [34d8d36b60b9efe7cc907c3468636f46602e556c](https://github.com/envoyproxy/envoy/commit/34d8d36b60b9efe7cc907c3468636f46602e556c) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Fixed the local reply and destroy order crashes when using the HTTP async client for websocket handshake.   
 
---

**category**   : bug_fixes  
**area**       : http3  
**summary**    : http: fix issues in CONNECT-UDP forwarding mode. (#36174)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [0e7fdf5f23e3147a998c24a0cf8e3192797e80c5](https://github.com/envoyproxy/envoy/commit/0e7fdf5f23e3147a998c24a0cf8e3192797e80c5) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [36174](https://github.com/envoyproxy/envoy/pull/36174) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Fixed a bug in the ``CONNECT-UDP`` forwarding mode where Envoy reset the upstream stream when it received HTTP/3 datagrams before receiving the SETTINGS frame from the upstream peer. Envoy now drops the datagrams in this case instead of resetting the stream.   
 
---

**category**   : bug_fixes  
**area**       : oauth  
**summary**    : oauth filter: set token cookies regardless of forward_bearer_token option and ability to disable bearertoken and refreshtoken cookie (#35839)  
**commit**     : [46e8da9d1b01ecf120d503bd0449a3041cb63399](https://github.com/envoyproxy/envoy/commit/46e8da9d1b01ecf120d503bd0449a3041cb63399)  
**pr**         : [35839](https://github.com/envoyproxy/envoy/pull/35839)  
**description**:  
Set token cookies in response regardless of [forward_bearer_token](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-forward-bearer-token) config option.   
 
---

**category**   : bug_fixes  
**area**       : tracing  
**summary**    : opentelemetrytracer: avoid exporting when there are no spans (#36313)  
**commit**     : [49a4bcc47c6b59ede19deb2435aede4337f1e5ef](https://github.com/envoyproxy/envoy/commit/49a4bcc47c6b59ede19deb2435aede4337f1e5ef)  
**pr**         : [36313](https://github.com/envoyproxy/envoy/pull/36313)  
**description**:  
Fixed a bug where the OpenTelemetry tracer exports the OTLP request even when no spans are present.   
 
---

**category**   : bug_fixes  
**area**       : wasm  
**summary**    : wasm: Add data buffering for chunks (#36411)  
**commit**     : [2e4ee89c085d2114945e677cf553c91dea046fc0](https://github.com/envoyproxy/envoy/commit/2e4ee89c085d2114945e677cf553c91dea046fc0)  
**pr**         : [36411](https://github.com/envoyproxy/envoy/pull/36411)  
**description**:  
Fixed a bug where a body received in chunks is not correctly dumped, resulting in an incomplete dump and loss of the last chunk. This issue is manifested in HTTP/2.   
 
---

**category**   : bug_fixes  
**area**       : dynamic_forward_proxy  
**summary**    : dynamic_forward_proxy: fix sub_cluster_confg stuck with warm up due to DFPCluster removed (#35848)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [df48c7d10e72a18445c15396e84815add1757d8a](https://github.com/envoyproxy/envoy/commit/df48c7d10e72a18445c15396e84815add1757d8a) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [35848](https://github.com/envoyproxy/envoy/pull/35848) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Fixed a bug where DFP sub-cluster gets removed due to CDS update and doesn't gets recreated. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.avoid_dfp_cluster_removal_on_cds_update`` to ``false``.   
 
---

## removed_config_or_runtime

**category**   : removed_config_or_runtime  
**area**       : upstream  
**summary**    : runtime: deprecating avoid_zombie_streams (#35376)  
**commit**     : [266fad9efe5a6621506828cebcad7c6a1d96ed1e](https://github.com/envoyproxy/envoy/commit/266fad9efe5a6621506828cebcad7c6a1d96ed1e)  
**pr**         : [35376](https://github.com/envoyproxy/envoy/pull/35376)  
**description**:  
Removed runtime flag ``envoy.reloadable_features.avoid_zombie_streams`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : ext_proc  
**summary**    : Remove runtime flag envoy_reloadable_features_send_header_raw_value (#35388)  
**summary**    : Remove runtime flag envoy_reloadable_features_immediate_response_use_filter_mutation_rule (#35381)  
**commit**     : [8a214e8a7104749f81cb945dc79e4a23029d6bda](https://github.com/envoyproxy/envoy/commit/8a214e8a7104749f81cb945dc79e4a23029d6bda) [638a45268e66daaa52e371d99ace197f7ad3b40f](https://github.com/envoyproxy/envoy/commit/638a45268e66daaa52e371d99ace197f7ad3b40f)  
**pr**         : [35388](https://github.com/envoyproxy/envoy/pull/35388) [35381](https://github.com/envoyproxy/envoy/pull/35381)  
**description**:  
Removed runtime flag ``envoy_reloadable_features_immediate_response_use_filter_mutation_rule`` and legacy code path.   
 
---

**category**   : removed_config_or_runtime  
**area**       : ext_proc  
**summary**    : Remove runtime flag envoy_reloadable_features_immediate_response_use_filter_mutation_rule (#35381)  
**summary**    : Remove runtime flag envoy_reloadable_features_send_header_raw_value (#35388)  
**commit**     : [638a45268e66daaa52e371d99ace197f7ad3b40f](https://github.com/envoyproxy/envoy/commit/638a45268e66daaa52e371d99ace197f7ad3b40f) [8a214e8a7104749f81cb945dc79e4a23029d6bda](https://github.com/envoyproxy/envoy/commit/8a214e8a7104749f81cb945dc79e4a23029d6bda)  
**pr**         : [35381](https://github.com/envoyproxy/envoy/pull/35381) [35388](https://github.com/envoyproxy/envoy/pull/35388)  
**description**:  
Removed runtime flag ``envoy_reloadable_features_send_header_raw_value`` and legacy code path.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http  
**summary**    : runtime: remove envoy.reloadable_features.no_downgrade_to_canonical_name (#35331)  
**commit**     : [45bacfad74157d0e0727c784b6922eca8726ed8f](https://github.com/envoyproxy/envoy/commit/45bacfad74157d0e0727c784b6922eca8726ed8f)  
**pr**         : [35331](https://github.com/envoyproxy/envoy/pull/35331)  
**description**:  
Removed runtime flag ``envoy.reloadable_features.no_downgrade_to_canonical_name`` and legacy code path.   
 
---

**category**   : removed_config_or_runtime  
**area**       : DNS  
**summary**    : Remove runtime flag envoy_reloadable_features_dns_cache_set_first_resolve_complete (#35379)  
**commit**     : [c3241e42bc6695b5e08a1319ad4be563cb745064](https://github.com/envoyproxy/envoy/commit/c3241e42bc6695b5e08a1319ad4be563cb745064)  
**pr**         : [35379](https://github.com/envoyproxy/envoy/pull/35379)  
**description**:  
Removed ``envoy.reloadable_features.dns_cache_set_first_resolve_complete`` runtime flag and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : tls  
**summary**    : tls: remove runtime guard `ssl_transport_failure_reason_format` (#35389)  
**commit**     : [e5fc7ecb40d810c2b8bc23db351fa75eb165865b](https://github.com/envoyproxy/envoy/commit/e5fc7ecb40d810c2b8bc23db351fa75eb165865b)  
**pr**         : [35389](https://github.com/envoyproxy/envoy/pull/35389)  
**description**:  
Removed runtime flag ``envoy.reloadable_features.ssl_transport_failure_reason_format``.   
 
---

**category**   : removed_config_or_runtime  
**area**       : dynamic_foward_proxy  
**summary**    : runtime: deprecating dfp_mixed_scheme (#36199)  
**commit**     : [38530270d6cb3a3a71a9b70b3de55854750b75a9](https://github.com/envoyproxy/envoy/commit/38530270d6cb3a3a71a9b70b3de55854750b75a9)  
**pr**         : [36199](https://github.com/envoyproxy/envoy/pull/36199)  
**description**:  
Removed runtime flag ``envoy.reloadable_features.dfp_mixed_scheme`` and legacy code path.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http  
**summary**    : runtime: remove runtime flag envoy.reloadable_features.abort_filter_chain_on_stream_reset (#35405)  
**commit**     : [32fdabfbefc460d882bcad9773ad34fb1b79a8a3](https://github.com/envoyproxy/envoy/commit/32fdabfbefc460d882bcad9773ad34fb1b79a8a3)  
**pr**         : [35405](https://github.com/envoyproxy/envoy/pull/35405)  
**description**:  
Removed runtime flag ``envoy.reloadable_features.abort_filter_chain_on_stream_reset`` and legacy code path.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http  
**summary**    : http: deprecate `envoy.reloadable_features.http1_connection_close_header_in_redirect` (#35603)  
**commit**     : [121a541dd3fadef7131963f23e42a41e0c93e102](https://github.com/envoyproxy/envoy/commit/121a541dd3fadef7131963f23e42a41e0c93e102)  
**pr**         : [35603](https://github.com/envoyproxy/envoy/pull/35603)  
**description**:  
Removed runtime flag ``envoy.reloadable_features.http1_connection_close_header_in_redirect`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : grpc reverse bridge  
**summary**    : Fix #35369. (#35386)  
**commit**     : [b10df774b021c70b55434a4f2a2e5363e6b2fff4](https://github.com/envoyproxy/envoy/commit/b10df774b021c70b55434a4f2a2e5363e6b2fff4)  
**pr**         : [35386](https://github.com/envoyproxy/envoy/pull/35386)  
**description**:  
Removed ``envoy.reloadable_features.grpc_http1_reverse_bridge_handle_empty_response`` runtime flag and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : grpc reverse bridge  
**summary**    : Remove envoy.reloadable_features.grpc_http1_reverse_bridge_change_http_status  
**commit**     : [420a0a8e06df923802d79b36396ed5369a51ce72](https://github.com/envoyproxy/envoy/commit/420a0a8e06df923802d79b36396ed5369a51ce72)  
**pr**         :  
**description**:  
Removed ``envoy.reloadable_features.grpc_http1_reverse_bridge_change_http_status`` runtime flag and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : stateful_session  
**summary**    : Remove runtime guard envoy_reloadable_features_stateful_session_encode_ttl_in_cookie (#35385)  
**commit**     : [1d5aa24a2f282cdb541f755131465e59eae8e624](https://github.com/envoyproxy/envoy/commit/1d5aa24a2f282cdb541f755131465e59eae8e624)  
**pr**         : [35385](https://github.com/envoyproxy/envoy/pull/35385)  
**description**:  
Removed ``envoy.reloadable_features.stateful_session_encode_ttl_in_cookie`` runtime flag and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : quic  
**summary**    : quic: deprecate `envoy.reloadable_features.quic_fix_filter_manager_uaf` (#35569)  
**commit**     : [8981cf3a3eb835f35aed39e0c3f67613ca152174](https://github.com/envoyproxy/envoy/commit/8981cf3a3eb835f35aed39e0c3f67613ca152174)  
**pr**         : [35569](https://github.com/envoyproxy/envoy/pull/35569)  
**description**:  
Removed ``envoy.reloadable_features.quic_fix_filter_manager_uaf`` runtime flag and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : udp  
**summary**    : udp: deprecate `envoy.restart_features.udp_read_normalize_addresses` (#35529)  
**commit**     : [75622fe0ec992ab3709933bfc149069e12146b8d](https://github.com/envoyproxy/envoy/commit/75622fe0ec992ab3709933bfc149069e12146b8d)  
**pr**         : [35529](https://github.com/envoyproxy/envoy/pull/35529)  
**description**:  
Removed ``envoy.restart_features.udp_read_normalize_addresses`` runtime flag and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : upstream  
**summary**    : Remove feature flag upstream_allow_connect_with_2xx (#35521)  
**commit**     : [8b9b23b9a1d479b7e11212c865c647f2f78737e8](https://github.com/envoyproxy/envoy/commit/8b9b23b9a1d479b7e11212c865c647f2f78737e8)  
**pr**         : [35521](https://github.com/envoyproxy/envoy/pull/35521)  
**description**:  
Removed runtime flag ``envoy.reloadable_features.upstream_allow_connect_with_2xx`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : upstream flow control  
**summary**    : deprecate `envoy.reloadable_features.upstream_wait_for_response_headers_before_disabling_read` (#35502)  
**commit**     : [b0cc284f86e328a33525d6d2b8f6ab00fff240b8](https://github.com/envoyproxy/envoy/commit/b0cc284f86e328a33525d6d2b8f6ab00fff240b8)  
**pr**         : [35502](https://github.com/envoyproxy/envoy/pull/35502)  
**description**:  
Removed ``envoy.reloadable_features.upstream_wait_for_response_headers_before_disabling_read`` runtime flag and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : dynamic forward proxy  
**summary**    : runtime: Remove `normalize_host_for_preresolve_dfp_dns` runtime guard (#35601)  
**commit**     : [dab11324bb39dcd516cc5a82940b2355ad307c58](https://github.com/envoyproxy/envoy/commit/dab11324bb39dcd516cc5a82940b2355ad307c58)  
**pr**         : [35601](https://github.com/envoyproxy/envoy/pull/35601)  
**description**:  
Removed ``envoy.reloadable_features.normalize_host_for_preresolve_dfp_dns`` runtime flag and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http  
**summary**    : remove H2 header normalisation runtime guard (#35760)  
**summary**    : http: remove envoy_reloadable_features_http2_validate_authority_with_quiche (#36009)  
**commit**     : [a630749c5e2fb2392d1f0d016c5f474744038e70](https://github.com/envoyproxy/envoy/commit/a630749c5e2fb2392d1f0d016c5f474744038e70) [2def53d4d453cf42d37e660f5616a12f782d7429](https://github.com/envoyproxy/envoy/commit/2def53d4d453cf42d37e660f5616a12f782d7429)  
**pr**         : [35760](https://github.com/envoyproxy/envoy/pull/35760) [36009](https://github.com/envoyproxy/envoy/pull/36009)  
**description**:  
Removed the ``envoy.reloadable_features.http2_validate_authority_with_quiche`` runtime flag and its legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http  
**summary**    : http: remove envoy_reloadable_features_http2_validate_authority_with_quiche (#36009)  
**summary**    : remove H2 header normalisation runtime guard (#35760)  
**commit**     : [2def53d4d453cf42d37e660f5616a12f782d7429](https://github.com/envoyproxy/envoy/commit/2def53d4d453cf42d37e660f5616a12f782d7429) [a630749c5e2fb2392d1f0d016c5f474744038e70](https://github.com/envoyproxy/envoy/commit/a630749c5e2fb2392d1f0d016c5f474744038e70)  
**pr**         : [36009](https://github.com/envoyproxy/envoy/pull/36009) [35760](https://github.com/envoyproxy/envoy/pull/35760)  
**description**:  
Removed ``envoy.reloadable_features.use_http3_header_normalisation`` runtime flag and legacy code paths.   
 
---

## new_features

**category**   : new_features  
**area**       : dns  
**summary**    : Add jitter to strict and logical dns clusters (#35745)  
**commit**     : [20e27887d29d735e1cc47cbb9af1cfe9baac4b4d](https://github.com/envoyproxy/envoy/commit/20e27887d29d735e1cc47cbb9af1cfe9baac4b4d)  
**pr**         : [35745](https://github.com/envoyproxy/envoy/pull/35745)  
**description**:  
for the [strict]() and [logical]() cluster types, the new [dns_jitter](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-dns-jitter) field, if provided, will causes the cluster to refresh DNS entries later by a random amount of time as to avoid stampedes of DNS requests. This field sets the upper bound (exclusive) for the random amount.   
 
---

**category**   : new_features  
**area**       : redis  
**summary**    : filter-network-redis: add support for Redis publish command (#35632)  
**commit**     : [cda4f6171ecbd66f3c740f477ffa94543c00e689](https://github.com/envoyproxy/envoy/commit/cda4f6171ecbd66f3c740f477ffa94543c00e689)  
**pr**         : [35632](https://github.com/envoyproxy/envoy/pull/35632)  
**description**:  
Added support for publish.   
 
---

**category**   : new_features  
**area**       : jwt_authn  
**summary**    : jwt_authn: add missing path_match_policy matcher implementation (#35072)  
**commit**     : [b1dca5a656630b1073825dbbfc4a50c831b521f9](https://github.com/envoyproxy/envoy/commit/b1dca5a656630b1073825dbbfc4a50c831b521f9)  
**pr**         : [35072](https://github.com/envoyproxy/envoy/pull/35072)  
**description**:  
Added missing implementation to jwt_authn matchers to allow glob pattern matching.   
 
---

**category**   : new_features  
**area**       : tls  
**summary**    : tls: add enable_client_cipher_preference option  (#35106)  
**commit**     : [226942b4858699c38605567f8d3b70927a19cc96](https://github.com/envoyproxy/envoy/commit/226942b4858699c38605567f8d3b70927a19cc96)  
**pr**         : [35106](https://github.com/envoyproxy/envoy/pull/35106)  
**description**:  
Added [prefer_client_ciphers](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/transport_sockets/tls/v3/tls.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-downstreamtlscontext-prefer-client-ciphers) to support enabling client cipher preference instead of server's for TLS handshakes.   
 
---

**category**   : new_features  
**area**       : ext_authz  
**summary**    : ext_authz: filter state access logging stats PREP (#34945)  
**commit**     : [ff6ced12ef202a18f94186da898ea10329b618e9](https://github.com/envoyproxy/envoy/commit/ff6ced12ef202a18f94186da898ea10329b618e9)  
**pr**         : [34945](https://github.com/envoyproxy/envoy/pull/34945)  
**description**:  
Added config field [filter_metadata](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-filter-metadata) for injecting arbitrary data to the filter state for logging.   
 
---

**category**   : new_features  
**area**       : access_log  
**summary**    : Add %UPSTREAM_CLUSTER_RAW% formatter (#35265)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [f4499c619b068ed6edc3f45cdc811706123936b3](https://github.com/envoyproxy/envoy/commit/f4499c619b068ed6edc3f45cdc811706123936b3) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35265](https://github.com/envoyproxy/envoy/pull/35265) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
added ``%UPSTREAM_CLUSTER_RAW%`` access log formatter to log the original upstream cluster name, regardless of whether ``alt_stat_name`` is set.   
 
---

**category**   : new_features  
**area**       : formatter  
**summary**    : date formatter: fix/enhance the precision of date formatter (#35450)  
**commit**     : [9feddc11baec8ee31c957e0b6b8f8988a0ef9d59](https://github.com/envoyproxy/envoy/commit/9feddc11baec8ee31c957e0b6b8f8988a0ef9d59)  
**pr**         : [35450](https://github.com/envoyproxy/envoy/pull/35450)  
**description**:  
Added full feature absl::FormatTime() support to the DateFormatter. This allows the timepoint formatters (like ``%START_TIME%``) to use ``%E#S``, ``%E*S``, ``%E#f`` and ``%E*f`` to format the subsecond part of the timepoint.   
 
---

**category**   : new_features  
**area**       : http  
**summary**    : http: add config for max response header size (#36231)  
**summary**    : http: allow runtime override of default for max response headers kb (#36439)  
**commit**     : [07a8c4afe8ac83632535bd118f142df70d2335be](https://github.com/envoyproxy/envoy/commit/07a8c4afe8ac83632535bd118f142df70d2335be) [1173629e531abf758f011c2da15da739f72881c6](https://github.com/envoyproxy/envoy/commit/1173629e531abf758f011c2da15da739f72881c6)  
**pr**         : [36231](https://github.com/envoyproxy/envoy/pull/36231) [36439](https://github.com/envoyproxy/envoy/pull/36439)  
**description**:  
Added configuration setting for the [maximum]() in responses. The default can be overridden with runtime key ``envoy.reloadable_features.max_response_headers_size_kb``.   
 
---

**category**   : new_features  
**area**       : http_11_proxy  
**summary**    : http_11_proxy: Allow for configuration via endpoint metadata (#35486)  
**commit**     : [03561251fbc50e9d16b35e02ae6032e073c16430](https://github.com/envoyproxy/envoy/commit/03561251fbc50e9d16b35e02ae6032e073c16430)  
**pr**         : [35486](https://github.com/envoyproxy/envoy/pull/35486)  
**description**:  
Added the option to configure the transport socket via locality or endpoint metadata.   
 
---

**category**   : new_features  
**area**       : sockets  
**summary**    : socket: Add socket type in SocketOption (#35285)  
**commit**     : [1d9910e57d9b767b6a5653f746b760bbb8c8f145](https://github.com/envoyproxy/envoy/commit/1d9910e57d9b767b6a5653f746b760bbb8c8f145)  
**pr**         : [35285](https://github.com/envoyproxy/envoy/pull/35285)  
**description**:  
Added socket ``type`` field for specifying a socket type to apply the socket option to under [SocketOption](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/core/v3/socket_option.proto.html#envoy-v3-api-msg-config-core-v3-socketoption). If not specified, the socket option will be applied to all socket types.   
 
---

**category**   : new_features  
**area**       : quic  
**summary**    : quic: enable certificate compression/decompression (#35999)  
**commit**     : [627187b5b8da45c8cc028c44f41b70a12c67b2b7](https://github.com/envoyproxy/envoy/commit/627187b5b8da45c8cc028c44f41b70a12c67b2b7)  
**pr**         : [35999](https://github.com/envoyproxy/envoy/pull/35999)  
**description**:  
QUIC server and client support certificate compression, which can in some cases reduce the number of round trips required to setup a connection. This change temporarily disabled by setting the runtime flag ``envoy.reloadable_features.quic_support_certificate_compression`` to ``false``.   
 
---

**category**   : new_features  
**area**       : quic  
**summary**    : quic: Adding QUIC listener option to reject new connections (#36070)  
**commit**     : [88543c9c37f389ff6d2650bb7aae211563ab0485](https://github.com/envoyproxy/envoy/commit/88543c9c37f389ff6d2650bb7aae211563ab0485)  
**pr**         : [36070](https://github.com/envoyproxy/envoy/pull/36070)  
**description**:  
Added QUIC protocol option [reject_new_connections](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/listener/v3/quic_config.proto.html#envoy-v3-api-field-config-listener-v3-quicprotocoloptions-reject-new-connections) to reject connection-establishing packets at the QUIC layer.   
 
---

**category**   : new_features  
**area**       : tls  
**summary**    : doc: add change log for custom_tls_certificate_selector. (#35440)  
**commit**     : [4beb53dfd8a45f24027def7ac2bd4a258603cc19](https://github.com/envoyproxy/envoy/commit/4beb53dfd8a45f24027def7ac2bd4a258603cc19)  
**pr**         : [35440](https://github.com/envoyproxy/envoy/pull/35440)  
**description**:  
Added an extension point [custom_tls_certificate_selector](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/transport_sockets/tls/v3/tls.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-commontlscontext-custom-tls-certificate-selector) to allow overriding TLS certificate selection behavior. An extension can select certificate base on the incoming SNI, in both sync and async mode.   
 
---

**category**   : new_features  
**area**       : oauth  
**summary**    : OAuth2: add domain attribute to token sessions (#35491)  
**summary**    : OAuth2: add retry policy to the OAuth2 filter (#35262)  
**summary**    : OAuth2: add a nonce to the state parameter (#35919)  
**commit**     : [8a5d7b0241b419854a4dd1c16c382a9784cdca4a](https://github.com/envoyproxy/envoy/commit/8a5d7b0241b419854a4dd1c16c382a9784cdca4a) [7f231c139f2c2a74d79fad98f21781a715ae5bae](https://github.com/envoyproxy/envoy/commit/7f231c139f2c2a74d79fad98f21781a715ae5bae) [b6c24ab35f5227f3e524f3d77f3e2a8ff3e24a15](https://github.com/envoyproxy/envoy/commit/b6c24ab35f5227f3e524f3d77f3e2a8ff3e24a15)  
**pr**         : [35491](https://github.com/envoyproxy/envoy/pull/35491) [35262](https://github.com/envoyproxy/envoy/pull/35262) [35919](https://github.com/envoyproxy/envoy/pull/35919)  
**description**:  
Added [retry_policy](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-retry-policy) to reconnect to the auth server when a connection fails to be established. Added [cookie_domain](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2credentials-cookie-domain) field to OAuth2 filter to allow setting the domain of cookies. Added a nonce to the state parameter in the authorization request to mitigate CSRF attacks. The nonce is generated by the OAuth2 filter and stored in a cookie. This feature is enabled by defaut starting from this release.   
 
---

**category**   : new_features  
**area**       : access log  
**summary**    : Add new stream formatters for cert chain identifiers (#35513)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [e0c98ec32b4840f03bb17d3b934f8bba92a3f03f](https://github.com/envoyproxy/envoy/commit/e0c98ec32b4840f03bb17d3b934f8bba92a3f03f) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35513](https://github.com/envoyproxy/envoy/pull/35513) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Added support for [%DOWNSTREAM_PEER_CHAIN_FINGERPRINTS_1%](https://www.envoyproxy.io/docs/envoy/v1.32.3/configuration/observability/access_log/usage.html#config-access-log-format-response-flags), ``%DOWNSTREAM_PEER_CHAIN_FINGERPRINTS_256%``, and ``%DOWNSTREAM_PEER_CHAIN_SERIALS%``, as access log formatters.   
 
---

**category**   : new_features  
**area**       : matching  
**summary**    : Matchers: Add dynamic metadata to the http inputs (#34891)  
**commit**     : [520d88e4cb4e8c5014531281a88dcc8076e18bfd](https://github.com/envoyproxy/envoy/commit/520d88e4cb4e8c5014531281a88dcc8076e18bfd)  
**pr**         : [34891](https://github.com/envoyproxy/envoy/pull/34891)  
**description**:  
Added dynamic metadata matcher support [Dynamic]() and [Dynamic]().   
 
---

**category**   : new_features  
**area**       : ratelimit  
**summary**    : Add the ability to set the hits_addend for a given rate_limit request via a hardcoded dynamic metadata field (#34184)  
**commit**     : [9a474a30a1b9ecbfe1e9d1a5190ee8aef2b29041](https://github.com/envoyproxy/envoy/commit/9a474a30a1b9ecbfe1e9d1a5190ee8aef2b29041)  
**pr**         : [34184](https://github.com/envoyproxy/envoy/pull/34184)  
**description**:  
Added the ability to modify [hits_addend](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/service/ratelimit/v3/rls.proto.html#envoy-v3-api-field-service-ratelimit-v3-ratelimitrequest-hits-addend) by setting by setting filter state value ``envoy.ratelimit.hits_addend`` to the desired value.   
 
---

**category**   : new_features  
**area**       : access_log  
**summary**    : access log: added new START_TIME_LOCAL & EMIT_TIME_LOCAL command (#35280)  
**commit**     : [3761d87fbd6269719970856f3e2ddc386fa2915e](https://github.com/envoyproxy/envoy/commit/3761d87fbd6269719970856f3e2ddc386fa2915e)  
**pr**         : [35280](https://github.com/envoyproxy/envoy/pull/35280)  
**description**:  
Added new access log command operators ``%START_TIME_LOCAL%`` and ``%EMIT_TIME_LOCAL%``, similar to  ``%START_TIME%`` and ``%EMIT_TIME%``, but use local time zone.   
 
---

**category**   : new_features  
**area**       : quic  
**summary**    : Allow specified UDP cmsg to be saved to QuicReceivedPacket (#35382)  
**commit**     : [bd5bec9abb537b3d462ed4e74bb5ea4bf1844655](https://github.com/envoyproxy/envoy/commit/bd5bec9abb537b3d462ed4e74bb5ea4bf1844655)  
**pr**         : [35382](https://github.com/envoyproxy/envoy/pull/35382)  
**description**:  
Added QUIC protocol option [save_cmsg_config](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/listener/v3/quic_config.proto.html#envoy-v3-api-field-config-listener-v3-quicprotocoloptions-save-cmsg-config) to optionally specify a CMSG header type to be propagated from the first packet on the connection to QuicListenerFilter.   
 
---

**category**   : new_features  
**area**       : apple_dns_impl  
**summary**    : docs: cleanups for release (#36535)  
**summary**    : [mobile] Prefer IPv6 over IPv4 address for iOS (#35555)  
**commit**     : [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0) [d06a903c76d74c62240f9471dc0b5c0f8f94e327](https://github.com/envoyproxy/envoy/commit/d06a903c76d74c62240f9471dc0b5c0f8f94e327)  
**pr**         : [36535](https://github.com/envoyproxy/envoy/pull/36535) [35555](https://github.com/envoyproxy/envoy/pull/35555)  
**description**:  
For the apple DNS resolver, prefer using IPv6 address when addresses from both families are available. Can be reverted by setting ``envoy.reloadable_features.prefer_ipv6_dns_on_macos`` to false.   
 
---

**category**   : new_features  
**area**       : grpc_field_extraction  
**summary**    : GrpcFieldExtraction: Supports extracting fields of type `map<string, string>` in addition to string (#35162)  
**commit**     : [1cd67c5821125a246e2a4f13254f8d6c69068705](https://github.com/envoyproxy/envoy/commit/1cd67c5821125a246e2a4f13254f8d6c69068705)  
**pr**         : [35162](https://github.com/envoyproxy/envoy/pull/35162)  
**description**:  
Added ``map<string, string>`` support: Target fields of type ``map<string, string>`` can be extracted and added to dynamic metadata.   
 
---

**category**   : new_features  
**area**       : rbac  
**summary**    : rbac: add delay_deny implementation in RBAC network filter (#33875)  
**commit**     : [bf65ad3ab24a6c3cb2b60cdb2e043dea6e32c2ac](https://github.com/envoyproxy/envoy/commit/bf65ad3ab24a6c3cb2b60cdb2e043dea6e32c2ac)  
**pr**         : [33875](https://github.com/envoyproxy/envoy/pull/33875)  
**description**:  
Added [delay_deny](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/network/rbac/v3/rbac.proto.html#envoy-v3-api-msg-extensions-filters-network-rbac-v3-rbac) to support deny connection after the configured duration.   
 
---

**category**   : new_features  
**area**       : ext_authz  
**summary**    : ext_authz: add logging options (#35698)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [1eedeeed1a421f15577733347e8a32c1ace1f953](https://github.com/envoyproxy/envoy/commit/1eedeeed1a421f15577733347e8a32c1ace1f953) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35698](https://github.com/envoyproxy/envoy/pull/35698) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Added [emit_filter_state_stats](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-emit-filter-state-stats) which enables filter state stats for access logging.   
 
---

**category**   : new_features  
**area**       : extension_discovery_service  
**summary**    : ecds: support dynamic config for UDP session filters (#35852)  
**commit**     : [dbba2f08250953147308384923d9c7c381598c24](https://github.com/envoyproxy/envoy/commit/dbba2f08250953147308384923d9c7c381598c24)  
**pr**         : [35852](https://github.com/envoyproxy/envoy/pull/35852)  
**description**:  
added ECDS support for [UDP]().   
 
---

**category**   : new_features  
**area**       : http3  
**summary**    : http3: Unhide http3_protocol_options in HttpConnectionManager (#35763)  
**commit**     : [e37ffcf469495562139abe8db9320df531a69c56](https://github.com/envoyproxy/envoy/commit/e37ffcf469495562139abe8db9320df531a69c56)  
**pr**         : [35763](https://github.com/envoyproxy/envoy/pull/35763)  
**description**:  
``http3_protocol_options`` in ``HttpConnectionManager`` has been upgraded to general access.   
 
---

**category**   : new_features  
**area**       : cluster  
**summary**    : cluster: flip envoy_reloadable_features_use_config_in_happy_eyeballs to true (#35697)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [56fcd4dcbf05b9f3b53ac8b245adbdf3a59c15a3](https://github.com/envoyproxy/envoy/commit/56fcd4dcbf05b9f3b53ac8b245adbdf3a59c15a3) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35697](https://github.com/envoyproxy/envoy/pull/35697) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Allows customizing the happy eyeballs algorithm for an upstream cluster by configuring [happy_eyeballs_config](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-upstreamconnectionoptions-happy-eyeballs-config). A default configuration will be used if not provided. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.use_config_in_happy_eyeballs`` to false.   
 
---

**category**   : new_features  
**area**       : getaddrinfo  
**summary**    : getaddrinfo: Add a configuration to set the number of retries (#35813)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [9cb48c2d9095562c64ada207660ca7a38ca62992](https://github.com/envoyproxy/envoy/commit/9cb48c2d9095562c64ada207660ca7a38ca62992) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35813](https://github.com/envoyproxy/envoy/pull/35813) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Added [num_retries](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/network/dns_resolver/getaddrinfo/v3/getaddrinfo_dns_resolver.proto.html#envoy-v3-api-field-extensions-network-dns-resolver-getaddrinfo-v3-getaddrinfodnsresolverconfig-num-retries) to configure the number of DNS resolution retries. If this field is not provided, the ``getaddrinfo`` resolver will retry indefinitely until it succeeds or the DNS query times out. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.getaddrinfo_num_retries`` to false.   
 
---

**category**   : new_features  
**area**       : getaddrinfo  
**summary**    : getaddrinfo: Add trace info in the DNS resolution details (#36312)  
**commit**     : [187cd09e898bcf3b17682dc8a835dffabfc3533c](https://github.com/envoyproxy/envoy/commit/187cd09e898bcf3b17682dc8a835dffabfc3533c)  
**pr**         : [36312](https://github.com/envoyproxy/envoy/pull/36312)  
**description**:  
Added ``envoy.enable_dfp_dns_trace`` runtime flag to enable DNS query trace in the DNS resolution details.   
 
---

**category**   : new_features  
**area**       : geoip  
**summary**    : [Geoip] Mmdb hot reload support (#32490)  
**commit**     : [df382a98f47654539d5393d67e90d525f7aba47b](https://github.com/envoyproxy/envoy/commit/df382a98f47654539d5393d67e90d525f7aba47b)  
**pr**         : [32490](https://github.com/envoyproxy/envoy/pull/32490)  
**description**:  
Added ``envoy.reloadable_features.mmdb_files_reload_enabled`` runtime flag that enables reload of mmdb files by default.   
 
---

**category**   : new_features  
**area**       : access_log  
**summary**    : access log: new 20x faster json formatter implementation (#35545)  
**commit**     : [b7cad3987eb953224da2ae51820e25da3162d01f](https://github.com/envoyproxy/envoy/commit/b7cad3987eb953224da2ae51820e25da3162d01f)  
**pr**         : [35545](https://github.com/envoyproxy/envoy/pull/35545)  
**description**:  
Added new JSON access log formatter implementation which provides 16-25x performance improvement over the old implementation. The legacy implementation will be enabled by default for now but will be deprecated and removed in a future release. The [sort_properties](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/config/core/v3/substitution_format_string.proto.html#envoy-v3-api-field-config-core-v3-jsonformatoptions-sort-properties) field will be ignored in the new implementation because the new implementation always sorts properties. And the new implementation will always keep the value type in the JSON output. For example, the duration field will always be rendered as a number instead of a string. The new JSON formatter could be enabled by setting the runtime guard ``envoy.reloadable_features.logging_with_fast_json_formatter`` to true.   
 
---

**category**   : new_features  
**area**       : access_logs  
**summary**    : access_log: support UPSTREAM_CONNECTION_ID in UDP and TCP tunneling flows (#35950)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [bf9d8b786f61e4885392bc12a0a4c6ee97e129fe](https://github.com/envoyproxy/envoy/commit/bf9d8b786f61e4885392bc12a0a4c6ee97e129fe) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35950](https://github.com/envoyproxy/envoy/pull/35950) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Added support for ``%UPSTREAM_CONNECTION_ID%`` access log substitution string in TCP and UDP tunneling flows.   
 
---

**category**   : new_features  
**area**       : redis_proxy  
**summary**    : redis_proxy: add support for external authentication (#35643)  
**commit**     : [67b69c9038402b88953a2ab171ae38cab5cb23ab](https://github.com/envoyproxy/envoy/commit/67b69c9038402b88953a2ab171ae38cab5cb23ab)  
**pr**         : [35643](https://github.com/envoyproxy/envoy/pull/35643)  
**description**:  
Added [external_auth_provider](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/network/redis_proxy/v3/redis_proxy.proto.html#envoy-v3-api-msg-extensions-filters-network-redis-proxy-v3-redisproxy) to support external authentication for redis proxy.   
 
---

**category**   : new_features  
**area**       : udp_access_logs  
**summary**    : udp_access_logs: add support for byte transport statistics (#36025)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [5d572fa6bc49830177034c44e255ed8054bedd1a](https://github.com/envoyproxy/envoy/commit/5d572fa6bc49830177034c44e255ed8054bedd1a) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [36025](https://github.com/envoyproxy/envoy/pull/36025) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Added support for ``%BYTES_RECEIVED%``, ``%BYTES_SENT%``, ``%UPSTREAM_HEADER_BYTES_SENT%``, ``%UPSTREAM_HEADER_BYTES_RECEIVED%``, ``%UPSTREAM_WIRE_BYTES_SENT%``, ``%UPSTREAM_WIRE_BYTES_RECEIVED%`` access log substitution strings for UDP tunneling flows.   
 
---

**category**   : new_features  
**area**       : original_ip_detection extension  
**summary**    : xff: add support for configuring a list of trusted CIDRs (#31831)  
**commit**     : [fbc6ee2ed5b858c842999c688504fd133008868a](https://github.com/envoyproxy/envoy/commit/fbc6ee2ed5b858c842999c688504fd133008868a)  
**pr**         : [31831](https://github.com/envoyproxy/envoy/pull/31831)  
**description**:  
The [xff](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/http/original_ip_detection/xff/v3/xff.proto.html#envoy-v3-api-msg-extensions-http-original-ip-detection-xff-v3-xffconfig) original IP detection method now supports using a list of trusted CIDRs when parsing ``x-forwarded-for``.   
 
---

**category**   : new_features  
**area**       : resource_monitors  
**summary**    : Add a CPU utilization resource monitor for overload manager (#34713)  
**commit**     : [4d121628c648d2f565b4e6651484036981051763](https://github.com/envoyproxy/envoy/commit/4d121628c648d2f565b4e6651484036981051763)  
**pr**         : [34713](https://github.com/envoyproxy/envoy/pull/34713)  
**description**:  
Added possibility to monitor CPU utilization in Linux based systems via [cpu]() in overload manager.   
 
---

**category**   : new_features  
**area**       : lua  
**summary**    : lua: Add API to expose TLS OIDs for extensions (#35953)  
**summary**    : repo: Release v1.32.0 (#36597)  
**commit**     : [25bc5b298ee6d3dcd9b260345d1f40b06db63873](https://github.com/envoyproxy/envoy/commit/25bc5b298ee6d3dcd9b260345d1f40b06db63873) [86dc7ef91ca15fb4957a74bd599397413fc26a24](https://github.com/envoyproxy/envoy/commit/86dc7ef91ca15fb4957a74bd599397413fc26a24)  
**pr**         : [35953](https://github.com/envoyproxy/envoy/pull/35953) [36597](https://github.com/envoyproxy/envoy/pull/36597)  
**description**:  
Added two new methods ``oidsPeerCertificate()`` and ``oidsLocalCertificate()`` to SSL connection object API [SSL]().   
 
---

**category**   : new_features  
**area**       : local_ratelimit  
**summary**    : local rate limit: add new rate_limits support to the filter (#36099)  
**summary**    : release: Changelog cleanups (#36595)  
**commit**     : [e48666365c8a0b3a62343602fd9380d58a7afd95](https://github.com/envoyproxy/envoy/commit/e48666365c8a0b3a62343602fd9380d58a7afd95) [97a2f28ebaba4b005e4086a2dd30dc2f6639d84f](https://github.com/envoyproxy/envoy/commit/97a2f28ebaba4b005e4086a2dd30dc2f6639d84f)  
**pr**         : [36099](https://github.com/envoyproxy/envoy/pull/36099) [36595](https://github.com/envoyproxy/envoy/pull/36595)  
**description**:  
Add the [rate_limits](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/local_ratelimit/v3/local_rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-local-ratelimit-v3-localratelimit-rate-limits) field to generate rate limit descriptors. If this field is set, the [VirtualHost]() or [RouteAction]() fields will be ignored.   
 
---

**category**   : new_features  
**area**       : basic_auth  
**summary**    : basic_auth: support authorization header override (#36046)  
**commit**     : [f3ff3306f53fc0ebb6314ffad947896b56b23d29](https://github.com/envoyproxy/envoy/commit/f3ff3306f53fc0ebb6314ffad947896b56b23d29)  
**pr**         : [36046](https://github.com/envoyproxy/envoy/pull/36046)  
**description**:  
Added support to provide an override [authentication_header](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/basic_auth/v3/basic_auth.proto.html#envoy-v3-api-field-extensions-filters-http-basic-auth-v3-basicauth-authentication-header) to load Basic Auth credential.   
 
---

**category**   : new_features  
**area**       : quic  
**summary**    : http: fix issues in CONNECT-UDP forwarding mode. (#36174)  
**commit**     : [0e7fdf5f23e3147a998c24a0cf8e3192797e80c5](https://github.com/envoyproxy/envoy/commit/0e7fdf5f23e3147a998c24a0cf8e3192797e80c5)  
**pr**         : [36174](https://github.com/envoyproxy/envoy/pull/36174)  
**description**:  
Added ``max_packet_length`` to the QUIC protocol options to allow users to change the largest size of a QUIC packet that can be transmitted over the QUIC connection.   
 
---

**category**   : new_features  
**area**       : oauth  
**summary**    : oauth filter: set token cookies regardless of forward_bearer_token option and ability to disable bearertoken and refreshtoken cookie (#35839)  
**commit**     : [46e8da9d1b01ecf120d503bd0449a3041cb63399](https://github.com/envoyproxy/envoy/commit/46e8da9d1b01ecf120d503bd0449a3041cb63399)  
**pr**         : [35839](https://github.com/envoyproxy/envoy/pull/35839)  
**description**:  
Added [disable_access_token_set_cookie](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-disable-access-token-set-cookie) to disable setting the Access Token cookie.   
 
---

**category**   : new_features  
**area**       : oauth  
**summary**    : oauth filter: set token cookies regardless of forward_bearer_token option and ability to disable bearertoken and refreshtoken cookie (#35839)  
**commit**     : [46e8da9d1b01ecf120d503bd0449a3041cb63399](https://github.com/envoyproxy/envoy/commit/46e8da9d1b01ecf120d503bd0449a3041cb63399)  
**pr**         : [35839](https://github.com/envoyproxy/envoy/pull/35839)  
**description**:  
Added [disable_refresh_token_set_cookie](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-disable-refresh-token-set-cookie) to disable setting the Refresh Token cookie.   
 
---

**category**   : new_features  
**area**       : ext_proc  
**summary**    : ext_proc: Add allow list for mode override (#36279)  
**commit**     : [d741737f825af43f7f80c49d14cea674785f7f0b](https://github.com/envoyproxy/envoy/commit/d741737f825af43f7f80c49d14cea674785f7f0b)  
**pr**         : [36279](https://github.com/envoyproxy/envoy/pull/36279)  
**description**:  
Added allow list [allowed_override_modes](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-allowed-override-modes) for [mode_override](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/service/ext_proc/v3/external_processor.proto.html#envoy-v3-api-field-service-ext-proc-v3-processingresponse-mode-override).   
 
---

**category**   : new_features  
**area**       : load_balancing  
**summary**    : Add `ClientSideWeightedRoundRobin` LB Policy. (#35905)  
**summary**    : docs: cleanups for release (#36535)  
**commit**     : [89d485de2bdf741e4c010eccad9539db18e61202](https://github.com/envoyproxy/envoy/commit/89d485de2bdf741e4c010eccad9539db18e61202) [bfc071f9a5dcb8c159d660fff8559208b76256f0](https://github.com/envoyproxy/envoy/commit/bfc071f9a5dcb8c159d660fff8559208b76256f0)  
**pr**         : [35905](https://github.com/envoyproxy/envoy/pull/35905) [36535](https://github.com/envoyproxy/envoy/pull/36535)  
**description**:  
Added a new WIP implementation of [client_side_weighted_round_robin](https://www.envoyproxy.io/docs/envoy/v1.32.3/api-v3/extensions/load_balancing_policies/client_side_weighted_round_robin/v3/client_side_weighted_round_robin.proto.html#envoy-v3-api-msg-extensions-load-balancing-policies-client-side-weighted-round-robin-v3-clientsideweightedroundrobin) load balancing policy that uses ``OrcaLoadReport`` provided by the upstream host to calculate host load balancing weight.   
 
---

