category: behavior_changes  
area: ext_proc  
summary: ext_proc: change default sampling to false inheriting from parent decision (#37794)  
summary: docs: minor cleanup in changelogs (#37969)  
commit: [f213d160ee55f028dc18735fc80b58c2cbd24592](https://github.com/envoyproxy/envoy/commit/f213d160ee55f028dc18735fc80b58c2cbd24592) [01c4be35d50ec16fd2f29dc889cd2f4e1553b4d2](https://github.com/envoyproxy/envoy/commit/01c4be35d50ec16fd2f29dc889cd2f4e1553b4d2)  
pr: [37794](https://github.com/envoyproxy/envoy/pull/37794) [37969](https://github.com/envoyproxy/envoy/pull/37969)  
description:  
Previously, tracing spans generated by ``ext_proc`` were always sampled by default. Now, the default sampling decision of an ``ext_proc`` span is inherited from the parent span.   
 
---

category: behavior_changes  
area: tracing  
summary: opencensus: delete opencensus tracer (#37508)  
commit: [e456b9ba7683a09cea7a7f2af6d3a5a5c2ac10a6](https://github.com/envoyproxy/envoy/commit/e456b9ba7683a09cea7a7f2af6d3a5a5c2ac10a6)  
pr: [37508](https://github.com/envoyproxy/envoy/pull/37508)  
description:  
Removed support for (long deprecated) opencensus tracing extension.   
 
---

category: behavior_changes  
area: wasm  
summary: wasm: removed automatical route refreshment and add a foreign function to clear the route cache (#36671)  
summary: changelogs: Release cleanups (#37934)  
commit: [e483dbba01d23a9df37405e4a93b417aeffd5a0a](https://github.com/envoyproxy/envoy/commit/e483dbba01d23a9df37405e4a93b417aeffd5a0a) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36671](https://github.com/envoyproxy/envoy/pull/36671) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
The route cache will not be cleared by default if the Wasm extension modified the request headers and the ABI version of Wasm extension is larger then 0.2.1.   
 
---

category: behavior_changes  
area: wasm  
summary: wasm: remove redundant xds attributes (#36619)  
commit: [8fd5cc34d0372f0eb23f1c46be108c9456b69ecf](https://github.com/envoyproxy/envoy/commit/8fd5cc34d0372f0eb23f1c46be108c9456b69ecf)  
pr: [36619](https://github.com/envoyproxy/envoy/pull/36619)  
description:  
Remove previously deprecated xDS attributes from ``get_property``, use ``xds`` attributes instead.   
 
---

category: behavior_changes  
area: http  
summary: http: removing the default trusted address list (#36643)  
commit: [87ac1d2a5a69dfda86156003a2ecddd8cac500e0](https://github.com/envoyproxy/envoy/commit/87ac1d2a5a69dfda86156003a2ecddd8cac500e0)  
pr: [36643](https://github.com/envoyproxy/envoy/pull/36643)  
description:  
RFC1918 addresses are no longer considered to be internal addresses by default. This addresses a security issue for Envoy's in multi-tenant mesh environments. Please explicit set [internal_address_config](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-internal-address-config) to retain the prior behavior. This change can be temporarily reverted by setting runtime guard ``envoy.reloadable_features.explicit_internal_address_config`` to ``false``.   
 
---

category: behavior_changes  
area: http  
summary: http: make streaming shadows on by default (#37227)  
summary: changelogs: Release cleanups (#37934)  
commit: [8237c54e929b8950756b1366ad78aad7a68276ab](https://github.com/envoyproxy/envoy/commit/8237c54e929b8950756b1366ad78aad7a68276ab) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37227](https://github.com/envoyproxy/envoy/pull/37227) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added streaming shadow functionality. This allows for streaming the shadow request in parallel with the original request rather than waiting for the original request to complete. This allows shadowing requests larger than the buffer limit, but also means shadowing may take place for requests which are cancelled mid-stream. This behavior change can be temporarily reverted by flipping ``envoy.reloadable_features.streaming_shadow`` to ``false``.   
 
---

category: behavior_changes  
area: http  
summary: Fix the crash caused by continuing the filter after recreating stream (#37627)  
commit: [0038ebbacfe7899ce1c0b76c5136f1f319c3b2b0](https://github.com/envoyproxy/envoy/commit/0038ebbacfe7899ce1c0b76c5136f1f319c3b2b0)  
pr: [37627](https://github.com/envoyproxy/envoy/pull/37627)  
description:  
If the ``encoder_filter_chain_aborted_`` status bit of the HTTP filter manager is set to true, the encode filter chain cannot be continued, thus preventing unexpected logic from being triggered in scenarios such as ``ActiveStreamDecoderFilter::recreateStream()`` is called. This behavior change can be temporarily reverted by flipping ``envoy.reloadable_features.filter_chain_aborted_can_not_continue`` to ``false``.   
 
---

category: minor_behavior_changes  
area: access_log  
summary: access log: flip the runtime flag to enable new json formatter by default (#36629)  
summary: changelogs: Release cleanups (#37934)  
commit: [982c6bd6a74d3f0918c05b2c512f971240228d82](https://github.com/envoyproxy/envoy/commit/982c6bd6a74d3f0918c05b2c512f971240228d82) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36629](https://github.com/envoyproxy/envoy/pull/36629) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
New implementation of the JSON formatter will be enabled by default. The [sort_properties](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/core/v3/substitution_format_string.proto.html#envoy-v3-api-field-config-core-v3-jsonformatoptions-sort-properties) field will be ignored in the new implementation because the new implementation always sorts properties, and the new implementation will always keep the value type in the JSON output. For example, the ``duration`` field will always be rendered as a number instead of a string. This behavior change could be disabled temporarily by setting the runtime ``envoy.reloadable_features.logging_with_fast_json_formatter`` to false.   
 
---

category: minor_behavior_changes  
area: xds  
summary: xds: delta-xDS avoid copying resources (#36832)  
commit: [01eb316f00f8bd3c870ff6397668f6ea80cb7637](https://github.com/envoyproxy/envoy/commit/01eb316f00f8bd3c870ff6397668f6ea80cb7637)  
pr: [36832](https://github.com/envoyproxy/envoy/pull/36832)  
description:  
A minor delta-xDS optimization that avoids copying resources when ingesting them was introduced. No impact to the behavior is expected, but a runtime flag was added as this may impact config-ingestion related extensions (e.g., custom-config-validators, config-tracker), as the order of the elements passed to the callback functions may be different. This change can be temporarily reverted by setting ``envoy.reloadable_features.xds_prevent_resource_copy`` to ``false``.   
 
---

category: minor_behavior_changes  
area: formatter  
summary: formatter: use the new json lib to relace protobuf json (#36530)  
summary: changelogs: Release cleanups (#37934)  
commit: [6d6e613548de693022701ca9396de6f3e0697ec5](https://github.com/envoyproxy/envoy/commit/6d6e613548de693022701ca9396de6f3e0697ec5) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36530](https://github.com/envoyproxy/envoy/pull/36530) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
The ``NaN`` and ``Infinity`` values of float will be serialized to ``null`` and ``inf`` respectively in the metadata (``DYNAMIC_METADATA``, ``CLUSTER_METADATA``, etc.) formatter.   
 
---

category: minor_behavior_changes  
area: sds  
summary: sds: relax backing cluster check to allow dynamic clusters (#36694)  
summary: changelogs: Release cleanups (#37934)  
commit: [c53e54abdf4739445421b6787f76d3854bc8a8f2](https://github.com/envoyproxy/envoy/commit/c53e54abdf4739445421b6787f76d3854bc8a8f2) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36694](https://github.com/envoyproxy/envoy/pull/36694) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Relaxed the backing cluster validation for Secret Discovery Service(SDS). Currently, the cluster that supports SDS needs to be a primary cluster, i.e. a non-EDS cluster defined in bootstrap configuration. This change relaxes that restriction i.e. SDS cluster can be a dynamic cluster. This change is enabled by default, and can be reverted by setting the runtime flag ``envoy.restart_features.skip_backing_cluster_check_for_sds`` to ``false``.   
 
---

category: minor_behavior_changes  
area: http  
summary: request id: minor optimization or fix to the request id logic (#36773)  
commit: [3c773f832394f196e3a53d94ccb85558a9e02872](https://github.com/envoyproxy/envoy/commit/3c773f832394f196e3a53d94ccb85558a9e02872)  
pr: [36773](https://github.com/envoyproxy/envoy/pull/36773)  
description:  
If the [pack_trace_reason](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/request_id/uuid/v3/uuid.proto.html#envoy-v3-api-field-extensions-request-id-uuid-v3-uuidrequestidconfig-pack-trace-reason) is set to false, Envoy will not parse the trace reason from the ``x-request-id`` header to ensure reads and writes of trace reason be consistant. If the [pack_trace_reason](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/request_id/uuid/v3/uuid.proto.html#envoy-v3-api-field-extensions-request-id-uuid-v3-uuidrequestidconfig-pack-trace-reason) is set to true and external ``x-request-id`` value is used, the trace reason in the external request id will not be trusted and will be cleared.   
 
---

category: minor_behavior_changes  
area: oauth2  
summary: oauth2: enable `use_refresh_token` by default (#36065)  
summary: changelogs: Release cleanups (#37934)  
commit: [ce3e47b93d507daa5bbc68bf6eb7e1f66d8800ec](https://github.com/envoyproxy/envoy/commit/ce3e47b93d507daa5bbc68bf6eb7e1f66d8800ec) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36065](https://github.com/envoyproxy/envoy/pull/36065) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
[use_refresh_token](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-use-refresh-token) is now enabled by default. This behavioral change can be temporarily reverted by setting runtime guard ``envoy.reloadable_features.oauth2_use_refresh_token`` to ``false``.   
 
---

category: minor_behavior_changes  
area: oauth2  
summary: Fix: oauth2 state encoding (#37473)  
commit: [0c6a1d2b847bd5608db1b603c9517341758836f9](https://github.com/envoyproxy/envoy/commit/0c6a1d2b847bd5608db1b603c9517341758836f9)  
pr: [37473](https://github.com/envoyproxy/envoy/pull/37473)  
description:  
The ``state`` parameter in the OAuth2 authorization request has been changed to a base64url-encoded JSON object. The JSON object contains the original request URL and a nonce for CSRF prevention.   
 
---

category: minor_behavior_changes  
area: oauth2  
summary: OAuth2 filter: improve the csrf token with "Signed Double-Submit Cookie" (#37646)  
commit: [dcd8a22547edfda287d11e28669ebc07cf038b6e](https://github.com/envoyproxy/envoy/commit/dcd8a22547edfda287d11e28669ebc07cf038b6e)  
pr: [37646](https://github.com/envoyproxy/envoy/pull/37646)  
description:  
Implement the Signed Double-Submit Cookie pattern, as recommended by OWASP, by using the HMAC secret to sign and verify the nonce.   
 
---

category: minor_behavior_changes  
area: quic  
summary: runtime: Enable UDP GRO by default (#36811)  
summary: changelogs: Release cleanups (#37934)  
commit: [86952195019f917d816e708c8f643a18fbebd8c5](https://github.com/envoyproxy/envoy/commit/86952195019f917d816e708c8f643a18fbebd8c5) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36811](https://github.com/envoyproxy/envoy/pull/36811) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Enable UDP GRO in QUIC client connections by default. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.prefer_quic_client_udp_gro`` to ``false``.   
 
---

category: minor_behavior_changes  
area: scoped_rds  
summary: srds: permit dynamic SRDS resources to contain inline RDS configuration (#36703)  
commit: [e4e54f592c8d719b90cbb149fe0f7129098f43b4](https://github.com/envoyproxy/envoy/commit/e4e54f592c8d719b90cbb149fe0f7129098f43b4)  
pr: [36703](https://github.com/envoyproxy/envoy/pull/36703)  
description:  
The [route_configuration](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/route/v3/scoped_route.proto.html#envoy-v3-api-field-config-route-v3-scopedrouteconfiguration-route-configuration) field is supported when the ``ScopedRouteConfiguration`` resource is delivered via SRDS.   
 
---

category: minor_behavior_changes  
area: http  
summary: http: allow local replies to traverse the filter chain after 1xx headers (#37097)  
summary: changelogs: Release cleanups (#37934)  
commit: [7cf53442e41632514030cd4b662e94ada30bea2d](https://github.com/envoyproxy/envoy/commit/7cf53442e41632514030cd4b662e94ada30bea2d) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37097](https://github.com/envoyproxy/envoy/pull/37097) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Local replies now traverse the filter chain if 1xx headers have been sent to the client. This change can be reverted by setting the runtime guard ``envoy.reloadable_features.local_reply_traverses_filter_chain_after_1xx`` to ``false``.   
 
---

category: minor_behavior_changes  
area: cluster  
summary: Refactor dns cluster api (#36353)  
summary: repo: Release v1.33.0  
commit: [640fcc0f2637c50c51bdd831de26c588debc9277](https://github.com/envoyproxy/envoy/commit/640fcc0f2637c50c51bdd831de26c588debc9277) [b0f43d67aa25c1b03c97186a200cc187f4c22db3](https://github.com/envoyproxy/envoy/commit/b0f43d67aa25c1b03c97186a200cc187f4c22db3)  
pr: [36353](https://github.com/envoyproxy/envoy/pull/36353)  
description:  
Clusters can no longer use unregistered extension types in [cluster_type](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-cluster-type).   
 
---

category: minor_behavior_changes  
area: cluster  
summary: Refactor dns cluster api (#36353)  
summary: repo: Release v1.33.0  
commit: [640fcc0f2637c50c51bdd831de26c588debc9277](https://github.com/envoyproxy/envoy/commit/640fcc0f2637c50c51bdd831de26c588debc9277) [b0f43d67aa25c1b03c97186a200cc187f4c22db3](https://github.com/envoyproxy/envoy/commit/b0f43d67aa25c1b03c97186a200cc187f4c22db3)  
pr: [36353](https://github.com/envoyproxy/envoy/pull/36353)  
description:  
Clusters factories are registered by configuration type for [cluster_type](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-cluster-type) and will use configuration type to lookup the corresponding factory when available.   
 
---

category: minor_behavior_changes  
area: dns  
summary: Patch c-ares CVE-2024-25629 (#37269)  
commit: [4b24b953ffe48fe33fe83e15bdc76d663a4262ae](https://github.com/envoyproxy/envoy/commit/4b24b953ffe48fe33fe83e15bdc76d663a4262ae)  
pr: [37269](https://github.com/envoyproxy/envoy/pull/37269)  
description:  
Patched c-ares to address CVE-2024-25629.   
 
---

category: minor_behavior_changes  
area: csrf  
summary: csrf: increase only one counter per request (#37289)  
commit: [dab1fcc1d8846bdc2700bf57305bb9710c96bfd8](https://github.com/envoyproxy/envoy/commit/dab1fcc1d8846bdc2700bf57305bb9710c96bfd8)  
pr: [37289](https://github.com/envoyproxy/envoy/pull/37289)  
description:  
Increase only the statistics counter ``missing_source_origin`` for requests with a missing source origin. Previously, the ``request_invalid`` counter was also increased for such requests.   
 
---

category: minor_behavior_changes  
area: rate_limit  
summary: rate_limit: Add time unit week (#37494)  
commit: [33fb49977a10657a84a4aff1ea8c7988c54e3c42](https://github.com/envoyproxy/envoy/commit/33fb49977a10657a84a4aff1ea8c7988c54e3c42)  
pr: [37494](https://github.com/envoyproxy/envoy/pull/37494)  
description:  
add ``WEEK`` to the unit of time for rate limit.   
 
---

category: minor_behavior_changes  
area: rds  
summary: rds: normalize rds provider's config before calculating hash (#37180)  
summary: changelogs: Release cleanups (#37934)  
commit: [7a64f89463d5de73192927fa71a5bc1280131359](https://github.com/envoyproxy/envoy/commit/7a64f89463d5de73192927fa71a5bc1280131359) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37180](https://github.com/envoyproxy/envoy/pull/37180) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
When a new RDS provider config is pushed via xDS and the only difference is change to [initial_fetch_timeout](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/core/v3/config_source.proto.html#envoy-v3-api-field-config-core-v3-configsource-initial-fetch-timeout), the already existing provider will be reused. Envoy will not ask RDS server for routes config because existing provider already has up to date routes config. This behavioral change can be temporarily reverted by setting runtime guard ``envoy.reloadable_features.normalize_rds_provider_config`` to ``false``.   
 
---

category: minor_behavior_changes  
area: router  
summary: router: make shadow requests inherit parent sampling decision by default (#37874)  
commit: [8e44345df9cf304410112f00b474ed337ac5b395](https://github.com/envoyproxy/envoy/commit/8e44345df9cf304410112f00b474ed337ac5b395)  
pr: [37874](https://github.com/envoyproxy/envoy/pull/37874)  
description:  
Changed the behavior of shadow request sampling so that if trace sampling is not explicitly configured in the shadow policy, the shadow request will inherit the parent's sampling decision. This means sampling will follow the trace sampling policy of the original request, which prevents oversampling when runtime sampling is disabled. This behavior can be temporarily reverted by setting the runtime guard ``envoy.reloadable_features.shadow_policy_inherit_trace_sampling`` to ``false``.   
 
---

category: bug_fixes  
area: lrs  
summary: Change handling of graceful case of LoadStatsReporting onRemoteClose (#37076)  
summary: changelogs: Release cleanups (#37934)  
commit: [4e8706d1b41a0e80115103813b786c89d76ffd21](https://github.com/envoyproxy/envoy/commit/4e8706d1b41a0e80115103813b786c89d76ffd21) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37076](https://github.com/envoyproxy/envoy/pull/37076) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Fixes errors stat being incremented and warning log spamming for ``LoadStatsReporting`` graceful stream close.   
 
---

category: bug_fixes  
area: tls  
summary: tls: support IP SANs for IP versions not supported by host OS (#36770)  
commit: [dbf1fc8430e647098e98bb26737e8189c4cf63c5](https://github.com/envoyproxy/envoy/commit/dbf1fc8430e647098e98bb26737e8189c4cf63c5)  
pr: [36770](https://github.com/envoyproxy/envoy/pull/36770)  
description:  
Support operations on IP SANs when the IP version is not supported by the host operating system, for example an IPv6 SAN can now be used on a host not supporting IPv6 addresses.   
 
---

category: bug_fixes  
area: scoped_rds  
summary: srds: remove scope from scope_name_by_hash_ in case the scope key changes (#36702)  
commit: [59e8fadde8ade3444796bf13fbda02d2628b3d4c](https://github.com/envoyproxy/envoy/commit/59e8fadde8ade3444796bf13fbda02d2628b3d4c)  
pr: [36702](https://github.com/envoyproxy/envoy/pull/36702)  
description:  
Fixes scope key leak and spurious scope key conflicts when an update to an SRDS resource changes the key.   
 
---

category: bug_fixes  
area: stats ads grpc  
summary: stats: add tag extraction rules for google_grpc client (#36673)  
summary: changelogs: Release cleanups (#37934)  
commit: [82a4959f005c066c31df8fa3bcae703e80c8730e](https://github.com/envoyproxy/envoy/commit/82a4959f005c066c31df8fa3bcae703e80c8730e) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36673](https://github.com/envoyproxy/envoy/pull/36673) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Fixed metric for ADS disconnection counters using Google gRPC client. This extracts the gRPC client prefix specified in the [google_grpc](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/core/v3/grpc_service.proto.html#envoy-v3-api-field-config-core-v3-grpcservice-google-grpc) resource used for ADS, and adds that as a tag ``envoy_google_grpc_client_prefix`` to the Prometheus stats.   
 
---

category: bug_fixes  
area: golang  
summary: golang: avoid accessing deleted decoder_callbacks (#37405)  
summary: changelogs: Release cleanups (#37934)  
commit: [d33332a12e46da3049a8ed02571a6764e7f21024](https://github.com/envoyproxy/envoy/commit/d33332a12e46da3049a8ed02571a6764e7f21024) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37405](https://github.com/envoyproxy/envoy/pull/37405) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Fixes a crash during Golang GC caused by accessing deleted ``decoder_callbacks``. The bug was introduced in 1.31.0.   
 
---

category: bug_fixes  
area: access_log  
summary: Add release note for "Relax recent SNI restrictions" (#37000)  
commit: [db63605c2515a98e17835975e75fd80ca3c38a68](https://github.com/envoyproxy/envoy/commit/db63605c2515a98e17835975e75fd80ca3c38a68)  
pr: [37000](https://github.com/envoyproxy/envoy/pull/37000)  
description:  
Relaxed the restriction on SNI logging to allow the ``_`` character, even if ``envoy.reloadable_features.sanitize_sni_in_access_log`` is enabled.   
 
---

category: bug_fixes  
area: dns  
summary: changelogs: Release cleanups (#37934)  
summary: Fix a bug where DNS jitter can cause milliseconds duration to be interpreted as negative triggering envoy bug. (#36953)  
commit: [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d) [b422688bbe00890cab1db4ddd3f12760974ed287](https://github.com/envoyproxy/envoy/commit/b422688bbe00890cab1db4ddd3f12760974ed287)  
pr: [37934](https://github.com/envoyproxy/envoy/pull/37934) [36953](https://github.com/envoyproxy/envoy/pull/36953)  
description:  
Fixed bug where setting [dns_jitter](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-dns-jitter) to large values caused Envoy Bug to fire.   
 
---

category: bug_fixes  
area: oauth2  
summary: changelogs: Release cleanups (#37934)  
summary: fix: ouath2 filter id token and refresh token didn't adher to the `cookie_domain` setting (#37155)  
commit: [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d) [4b46b908bec1827dce3907ed43e04803c3f7acc5](https://github.com/envoyproxy/envoy/commit/4b46b908bec1827dce3907ed43e04803c3f7acc5)  
pr: [37934](https://github.com/envoyproxy/envoy/pull/37934) [37155](https://github.com/envoyproxy/envoy/pull/37155)  
description:  
Fixed an issue where ID token and refresh token did not adhere to the [cookie_domain](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2credentials-cookie-domain) field.   
 
---

category: bug_fixes  
area: original_ip_detection custom header extension  
summary: original_ip_detection: revert unintended XFF header appending behavior in CustomHeaderIPDetection (#37194)  
commit: [79958991ffe0cf8d59a4a351646c76d672dada83](https://github.com/envoyproxy/envoy/commit/79958991ffe0cf8d59a4a351646c76d672dada83)  
pr: [37194](https://github.com/envoyproxy/envoy/pull/37194)  
description:  
Reverted [custom]() extension to its original behavior by disabling automatic XFF header appending that was inadvertently introduced in PR #31831.   
 
---

category: bug_fixes  
area: tracers  
summary: limit calculated sampling exponent (#37240)  
commit: [005eb777285e9e186206726d0c83305f35ce62c9](https://github.com/envoyproxy/envoy/commit/005eb777285e9e186206726d0c83305f35ce62c9)  
pr: [37240](https://github.com/envoyproxy/envoy/pull/37240)  
description:  
Avoid possible overflow when setting span attributes in Dynatrace sampler.   
 
---

category: bug_fixes  
area: load_balancing  
summary: client-side-WRR-LB: Improve Client Side Weighted Round Robin lb policy. (#37127)  
commit: [150e16d7d37a53ad265ee2296acc30006b3bb961](https://github.com/envoyproxy/envoy/commit/150e16d7d37a53ad265ee2296acc30006b3bb961)  
pr: [37127](https://github.com/envoyproxy/envoy/pull/37127)  
description:  
Fixed default host weight calculation of [client_side_weighted_round_robin](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/load_balancing_policies/client_side_weighted_round_robin/v3/client_side_weighted_round_robin.proto.html#envoy-v3-api-msg-extensions-load-balancing-policies-client-side-weighted-round-robin-v3-clientsideweightedroundrobin) to properly handle even number of valid host weights.   
 
---

category: bug_fixes  
area: validation/tools  
summary: changelog: Add entry for `schema_validation_tool` fix (#37335)  
commit: [c3142e63866a144752626e50426b6b6a52e54fa0](https://github.com/envoyproxy/envoy/commit/c3142e63866a144752626e50426b6b6a52e54fa0)  
pr: [37335](https://github.com/envoyproxy/envoy/pull/37335)  
description:  
Add back missing extension for ``schema_validator_tool``.   
 
---

category: bug_fixes  
area: udp/dynamic_forward_proxy  
summary: dynamic_forward_proxy: bugfix for udp dynamic forward proxy filter when displaying buffer (#37391)  
summary: changelogs: Release cleanups (#37934)  
commit: [c0614f26bea2b7b14d5e82d55b7341314f8f730f](https://github.com/envoyproxy/envoy/commit/c0614f26bea2b7b14d5e82d55b7341314f8f730f) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37391](https://github.com/envoyproxy/envoy/pull/37391) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Fixed bug where ``dynamic_forward_proxy`` udp session filter disabled buffer in filter config instead of disabling buffer for the filter instance.   
 
---

category: bug_fixes  
area: csrf  
summary: csrf: Handle opaque origins correctly ("Origin: null") (#37460)  
commit: [a7758b8d3e933df0b428332d365057775c4fd048](https://github.com/envoyproxy/envoy/commit/a7758b8d3e933df0b428332d365057775c4fd048)  
pr: [37460](https://github.com/envoyproxy/envoy/pull/37460)  
description:  
Handle requests that have a "privacy sensitive" / opaque origin (``Origin: null``) as if the request had no origin information.   
 
---

category: bug_fixes  
area: udp_proxy  
summary: udp_proxy: fix crash during buffer watermarks callbacks (#37689)  
summary: changelogs: Release cleanups (#37934)  
commit: [9835a165b7c5454825762d6dd6bb648aa33f39b7](https://github.com/envoyproxy/envoy/commit/9835a165b7c5454825762d6dd6bb648aa33f39b7) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37689](https://github.com/envoyproxy/envoy/pull/37689) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Fix a bug that cause Envoy to crash due to segmentation fault when ``onBelowWriteBufferLowWatermark`` callback is called.   
 
---

category: bug_fixes  
area: orca  
summary: orca: fix the delimiter of the native http parser (#37724)  
summary: changelogs: Release cleanups (#37934)  
commit: [70b74781ad29f61fc5e378d792ad62adbef86dea](https://github.com/envoyproxy/envoy/commit/70b74781ad29f61fc5e378d792ad62adbef86dea) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37724](https://github.com/envoyproxy/envoy/pull/37724) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
The previous ORCA parser will use ``:`` as the delimiter of key/value pair in the native HTTP report. This is wrong based on the design document. The correct delimiter should be ``=``. This change adds the ``=`` delimiter support to match the design document and keep the ``:`` delimiter for backward compatibility.   
 
---

category: bug_fixes  
area: http/1  
summary: http/1: fix sending overload crash when request is reset  
commit: [2960f0f60dbe32a419e0901de7cf662e61ee18be](https://github.com/envoyproxy/envoy/commit/2960f0f60dbe32a419e0901de7cf662e61ee18be)  
pr:  
description:  
Fixes sending overload crashes when HTTP/1 request is reset.   
 
---

category: bug_fixes  
area: happy_eyeballs  
summary: happy_eyeballs: Validate that additional_address are IP addresses instead of crashing when sorting.  
commit: [c312e483b32e5c09b10946d50f08c07988a7a1cd](https://github.com/envoyproxy/envoy/commit/c312e483b32e5c09b10946d50f08c07988a7a1cd)  
pr:  
description:  
Validate that ``additional_address`` are IP addresses instead of crashing when sorting.   
 
---

category: bug_fixes  
area: balsa  
summary: [balsa] fix for 1xx response mixup  
summary: changelogs: Release cleanups (#37934)  
commit: [da56f6da63079baecef9183436ee5f4141a59af8](https://github.com/envoyproxy/envoy/commit/da56f6da63079baecef9183436ee5f4141a59af8) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Fix incorrect handling of non-101 1xx responses. This fix can be temporarily reverted by setting runtime guard ``envoy.reloadable_features.wait_for_first_byte_before_balsa_msg_done`` to ``false``.   
 
---

category: bug_fixes  
area: dns_cache  
summary: dns_cache: fix a bug in the DNS refresh rate (#37750)  
summary: changelogs: Release cleanups (#37934)  
commit: [0fba1836d6109108043c534977d3e6582c5dc376](https://github.com/envoyproxy/envoy/commit/0fba1836d6109108043c534977d3e6582c5dc376) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37750](https://github.com/envoyproxy/envoy/pull/37750) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Fixed a bug where the DNS refresh rate was the DNS TTL instead of the configured ``dns_refresh_rate``/``dns_failure_refresh_rate`` when we failed to resolve the DNS query after a successful resolution.   
 
---

category: bug_fixes  
area: http2  
summary: http2: propagates reset events to CodecEventCallbacks when sending RST_STREAM (#37784)  
commit: [e294469598d0980a792221ce712eab14cc6511ab](https://github.com/envoyproxy/envoy/commit/e294469598d0980a792221ce712eab14cc6511ab)  
pr: [37784](https://github.com/envoyproxy/envoy/pull/37784)  
description:  
Propagates codec reset events when sending HTTP/2 RST_STREAM frames. Can be temporarily reverted by setting runtime guard ``envoy.reloadable_features.http2_propagate_reset_events`` to false.   
 
---

category: removed_config_or_runtime  
area: router  
summary: router: remove send_local_reply_when_no_buffer_and_upstream_request guard (#36620)  
commit: [0e1e3d4b724e8d108815589e09df31132faed71e](https://github.com/envoyproxy/envoy/commit/0e1e3d4b724e8d108815589e09df31132faed71e)  
pr: [36620](https://github.com/envoyproxy/envoy/pull/36620)  
description:  
Removed runtime guard ``envoy_reloadable_features_send_local_reply_when_no_buffer_and_upstream_request``.   
 
---

category: removed_config_or_runtime  
area: load balancing  
summary: Deprecating and removing envoy.reloadable_features.edf_lb_host_scheduler_init_fix (#36794)  
commit: [356ab339aee2b58fee1ccfd01c42662a5e691b89](https://github.com/envoyproxy/envoy/commit/356ab339aee2b58fee1ccfd01c42662a5e691b89)  
pr: [36794](https://github.com/envoyproxy/envoy/pull/36794)  
description:  
Removed runtime guard ``envoy.reloadable_features.edf_lb_host_scheduler_init_fix`` and legacy code paths.   
 
---

category: removed_config_or_runtime  
area: load balancing  
summary: Deprecating and removing envoy.reloadable_features.edf_lb_locality_scheduler_init_fix (#36835)  
commit: [aebc74dcd20a10b4422ef37b7e5e79532b125411](https://github.com/envoyproxy/envoy/commit/aebc74dcd20a10b4422ef37b7e5e79532b125411)  
pr: [36835](https://github.com/envoyproxy/envoy/pull/36835)  
description:  
Removed runtime guard ``envoy.reloadable_features.edf_lb_locality_scheduler_init_fix`` and legacy code paths.   
 
---

category: removed_config_or_runtime  
area: grpc  
summary: runtime: deprecate validate_grpc_header (#36757)  
commit: [c253ebe8c6903e7405aca10fbafdf94c3b82713a](https://github.com/envoyproxy/envoy/commit/c253ebe8c6903e7405aca10fbafdf94c3b82713a)  
pr: [36757](https://github.com/envoyproxy/envoy/pull/36757)  
description:  
Removed runtime guard ``envoy.reloadable_features.validate_grpc_header_before_log_grpc_status``.   
 
---

category: removed_config_or_runtime  
area: http  
summary: router: remove envoy.reloadable_features.http_route_connect_proxy_by_default (#36647)  
commit: [44d3b05124925509fe15c7c22432c698a6d478f5](https://github.com/envoyproxy/envoy/commit/44d3b05124925509fe15c7c22432c698a6d478f5)  
pr: [36647](https://github.com/envoyproxy/envoy/pull/36647)  
description:  
Removed runtime flag ``envoy.reloadable_features.http_route_connect_proxy_by_default`` and legacy code paths.   
 
---

category: removed_config_or_runtime  
area: http2  
summary: runtime: removed defer processing flag and legacy codepaths. (#36731)  
commit: [62be4be62fab3f56490dcbb3cdaf716040823746](https://github.com/envoyproxy/envoy/commit/62be4be62fab3f56490dcbb3cdaf716040823746)  
pr: [36731](https://github.com/envoyproxy/envoy/pull/36731)  
description:  
Removed runtime flag ``envoy.reloadable_features.defer_processing_backedup_streams`` and legacy code paths.   
 
---

category: removed_config_or_runtime  
area: dns  
summary: runtime: removing dns_reresolve_on_eai_again (#36656)  
commit: [c41a2b9e4e0c1c560e868023a7377f84729772e3](https://github.com/envoyproxy/envoy/commit/c41a2b9e4e0c1c560e868023a7377f84729772e3)  
pr: [36656](https://github.com/envoyproxy/envoy/pull/36656)  
description:  
Removed runtime flag ``envoy.reloadable_features.dns_reresolve_on_eai_again`` and legacy code paths.   
 
---

category: removed_config_or_runtime  
area: http  
summary: runtime: deprecate sanitize_te (#37512)  
commit: [da676bb810b7f9d599b05dced5d1339ca286ec39](https://github.com/envoyproxy/envoy/commit/da676bb810b7f9d599b05dced5d1339ca286ec39)  
pr: [37512](https://github.com/envoyproxy/envoy/pull/37512)  
description:  
Removed runtime flag ``envoy.restart_features.sanitize_te`` and legacy code paths.   
 
---

category: removed_config_or_runtime  
area: quic  
summary: quic: remove runtime guard and code for legacy cert handling (#36772)  
commit: [398d45d7b1a1616e773eff8531b742c974d78e8b](https://github.com/envoyproxy/envoy/commit/398d45d7b1a1616e773eff8531b742c974d78e8b)  
pr: [36772](https://github.com/envoyproxy/envoy/pull/36772)  
description:  
Removed runtime flag ``envoy.restart_features.quic_handle_certs_with_shared_tls_code`` and legacy code paths.   
 
---

category: removed_config_or_runtime  
area: upstream  
summary: runtime: deprecating envoy.restart_features.allow_client_socket_creation_failure (#36615)  
commit: [a67dbed93a8eb420d6a6643975c959c7f8da200c](https://github.com/envoyproxy/envoy/commit/a67dbed93a8eb420d6a6643975c959c7f8da200c)  
pr: [36615](https://github.com/envoyproxy/envoy/pull/36615)  
description:  
Removed runtime flag ``envoy.restart_features.allow_client_socket_creation_failure`` and legacy code paths.   
 
---

category: removed_config_or_runtime  
area: aws  
summary: aws: Removed runtime flag `use_http_client_to_fetch_aws_credentials` (#37513)  
commit: [885693b552e78f5e580961eddeb3d2fca3c937ed](https://github.com/envoyproxy/envoy/commit/885693b552e78f5e580961eddeb3d2fca3c937ed)  
pr: [37513](https://github.com/envoyproxy/envoy/pull/37513)  
description:  
Removed runtime flag ``envoy.reloadable_features.use_http_client_to_fetch_aws_credentials``.   
 
---

category: removed_config_or_runtime  
area: upstream  
summary: runtime: deprecating envoy.reloadable_features.exclude_host_in_eds_status_draining (#37185)  
commit: [a9bfac3e45157d158fdb000780a228deba1a49f0](https://github.com/envoyproxy/envoy/commit/a9bfac3e45157d158fdb000780a228deba1a49f0)  
pr: [37185](https://github.com/envoyproxy/envoy/pull/37185)  
description:  
Removed runtime flag ``envoy.reloadable_features.exclude_host_in_eds_status_draining``.   
 
---

category: new_features  
area: redis  
summary: [redis_proxy] Add support for SELECT and KEYS (#37706)  
commit: [712b73658357f97bb7b53b33b497258b5a83b1ac](https://github.com/envoyproxy/envoy/commit/712b73658357f97bb7b53b33b497258b5a83b1ac)  
pr: [37706](https://github.com/envoyproxy/envoy/pull/37706)  
description:  
Added support for keys and select.   
 
---

category: new_features  
area: wasm  
summary: wasm: restart wasm vm if it's failed because runtime error (#36456)  
summary: changelogs: Release cleanups (#37934)  
commit: [64b4d2e42bf400becbd4f9a5cde7fe6ab2e30c17](https://github.com/envoyproxy/envoy/commit/64b4d2e42bf400becbd4f9a5cde7fe6ab2e30c17) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36456](https://github.com/envoyproxy/envoy/pull/36456) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added the Wasm VM reload support to reload Wasm VM when the Wasm VM is failed with runtime errors. See [failure_policy](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/wasm/v3/wasm.proto.html#envoy-v3-api-field-extensions-wasm-v3-pluginconfig-failure-policy) for more details. The ``FAIL_RELOAD`` reload policy will be used by default.   
 
---

category: new_features  
area: wasm  
summary: deps: Update `proxy_wasm_cpp_host` -> c4d7bb0, `wasmtime` -> 24.0.2, `wamr` -> 2.2.0 (#37868)  
summary: changelogs: Release cleanups (#37934)  
commit: [34abaa400006bf2245cdfb0c2c5fa2c8b855ab6b](https://github.com/envoyproxy/envoy/commit/34abaa400006bf2245cdfb0c2c5fa2c8b855ab6b) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37868](https://github.com/envoyproxy/envoy/pull/37868) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added support for Wasm plugins written in Go with the ``github.com/proxy-wasm/proxy-wasm-go-sdk`` and compiled with Go v1.24+.   
 
---

category: new_features  
area: aws_request_signing  
summary: aws_signing: support for dynamically configurable credential (#36217)  
summary: changelogs: Release cleanups (#37934)  
summary: aws: update credential provider proto and support credential file reload (#37834)  
commit: [871b3e91234d6e305d4ec653444f1d56b324a302](https://github.com/envoyproxy/envoy/commit/871b3e91234d6e305d4ec653444f1d56b324a302) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d) [4d96cc2f572fae0c92a97a6a87a715436851131c](https://github.com/envoyproxy/envoy/commit/4d96cc2f572fae0c92a97a6a87a715436851131c)  
pr: [36217](https://github.com/envoyproxy/envoy/pull/36217) [37934](https://github.com/envoyproxy/envoy/pull/37934) [37834](https://github.com/envoyproxy/envoy/pull/37834)  
description:  
Added an optional field [credential_provider](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/filters/http/aws_request_signing/v3/aws_request_signing.proto.html#envoy-v3-api-field-extensions-filters-http-aws-request-signing-v3-awsrequestsigning-credential-provider) to the AWS request signing filter to explicitly specify a source for AWS credentials. Credential file and ``AssumeRoleWithWebIdentity`` behaviour can also be overridden with this field.   
 
---

category: new_features  
area: tls  
summary: tls: support for ECDSA P-384 and P-521 certificates (#36369)  
summary: docs: fix typos in the current changelogs (#37879)  
commit: [f86d1294e764af4429732d322c8a8a9fedead8a2](https://github.com/envoyproxy/envoy/commit/f86d1294e764af4429732d322c8a8a9fedead8a2) [aeb60e037a1937e2a2658ec0c7a72a5838e593ca](https://github.com/envoyproxy/envoy/commit/aeb60e037a1937e2a2658ec0c7a72a5838e593ca)  
pr: [36369](https://github.com/envoyproxy/envoy/pull/36369) [37879](https://github.com/envoyproxy/envoy/pull/37879)  
description:  
Added support for **P-384** and **P-521** curves for TLS server certificates.   
 
---

category: new_features  
area: tls  
summary: tls: add options to validate SANs and send SNI for upstream hostname (#36903)  
commit: [8ef1ecc4fae1699b8fcea839a510a8a760ddecd8](https://github.com/envoyproxy/envoy/commit/8ef1ecc4fae1699b8fcea839a510a8a760ddecd8)  
pr: [36903](https://github.com/envoyproxy/envoy/pull/36903)  
description:  
Added an [option](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/transport_sockets/tls/v3/tls.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-upstreamtlscontext-auto-sni-san-validation) to change the upstream SNI to the configured hostname for the upstream.   
 
---

category: new_features  
area: tls  
summary: tls: add options to validate SANs and send SNI for upstream hostname (#36903)  
commit: [8ef1ecc4fae1699b8fcea839a510a8a760ddecd8](https://github.com/envoyproxy/envoy/commit/8ef1ecc4fae1699b8fcea839a510a8a760ddecd8)  
pr: [36903](https://github.com/envoyproxy/envoy/pull/36903)  
description:  
Added an [option](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/transport_sockets/tls/v3/tls.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-upstreamtlscontext-auto-sni-san-validation) to validate the upstream server certificate SANs against the actual SNI value sent, regardless of the method of configuring SNI.   
 
---

category: new_features  
area: xds  
summary: ads-replacement: adding hook and cluster-manager support (#36768)  
commit: [312e01def6594155127d6d9a4e1a1de432551390](https://github.com/envoyproxy/envoy/commit/312e01def6594155127d6d9a4e1a1de432551390)  
pr: [36768](https://github.com/envoyproxy/envoy/pull/36768)  
description:  
Added support for ADS replacement by invoking ``xdsManager().setAdsConfigSource()`` with a new config source.   
 
---

category: new_features  
area: wasm  
summary: wasm: removed automatical route refreshment and add a foreign function to clear the route cache (#36671)  
summary: changelogs: Release cleanups (#37934)  
commit: [e483dbba01d23a9df37405e4a93b417aeffd5a0a](https://github.com/envoyproxy/envoy/commit/e483dbba01d23a9df37405e4a93b417aeffd5a0a) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36671](https://github.com/envoyproxy/envoy/pull/36671) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added ``clear_route_cache`` foreign function to clear the route cache.   
 
---

category: new_features  
area: access_log  
summary: Add support for OtherName, Email SAN substitution formatters (#36502)  
summary: docs: fix typos in the current changelogs (#37879)  
commit: [54d2ec9af11b3e0247fa6e02c182c1697faf2a75](https://github.com/envoyproxy/envoy/commit/54d2ec9af11b3e0247fa6e02c182c1697faf2a75) [aeb60e037a1937e2a2658ec0c7a72a5838e593ca](https://github.com/envoyproxy/envoy/commit/aeb60e037a1937e2a2658ec0c7a72a5838e593ca)  
pr: [36502](https://github.com/envoyproxy/envoy/pull/36502) [37879](https://github.com/envoyproxy/envoy/pull/37879)  
description:  
Added ``%DOWNSTREAM_LOCAL_EMAIL_SAN%``, ``%DOWNSTREAM_PEER_EMAIL_SAN%``, ``%DOWNSTREAM_LOCAL_OTHERNAME_SAN%`` and ``%DOWNSTREAM_PEER_OTHERNAME_SAN%`` substitution formatters.   
 
---

category: new_features  
area: access_log  
summary: access log: support upstream connect timing in COMMON_DURATION (#37077)  
commit: [853dbde25b62db6ae2d25de455a0ed381566f9a6](https://github.com/envoyproxy/envoy/commit/853dbde25b62db6ae2d25de455a0ed381566f9a6)  
pr: [37077](https://github.com/envoyproxy/envoy/pull/37077)  
description:  
Added support for logging upstream connection establishment duration in the [%COMMON_DURATION%](https://www.envoyproxy.io/docs/envoy/v1.33.0/configuration/observability/access_log/usage.html#config-access-log-format-common-duration) access log formatter operator. The following time points were added: ``%US_CX_BEG%``, ``%US_CX_END%``, ``%US_HS_END%``.   
 
---

category: new_features  
area: lua  
summary: lua: support logging methods on all envoy lua objects (#37293)  
commit: [5b1ab356018619c575cbe8295ad439462c5ef896](https://github.com/envoyproxy/envoy/commit/5b1ab356018619c575cbe8295ad439462c5ef896)  
pr: [37293](https://github.com/envoyproxy/envoy/pull/37293)  
description:  
Add logging functions to all lua objects. Previously these were only available on the Lua http filter request handle.   
 
---

category: new_features  
area: access log  
summary: add docs for lua filter and change log (#37246)  
summary: docs: fix typos in the current changelogs (#37879)  
commit: [44f175a7593d8adc3534ffae8d9f61a5bded3767](https://github.com/envoyproxy/envoy/commit/44f175a7593d8adc3534ffae8d9f61a5bded3767) [aeb60e037a1937e2a2658ec0c7a72a5838e593ca](https://github.com/envoyproxy/envoy/commit/aeb60e037a1937e2a2658ec0c7a72a5838e593ca)  
pr: [37246](https://github.com/envoyproxy/envoy/pull/37246) [37879](https://github.com/envoyproxy/envoy/pull/37879)  
description:  
Added fields for [DOWNSTREAM_DIRECT_LOCAL_ADDRESS](https://www.envoyproxy.io/docs/envoy/v1.33.0/configuration/observability/access_log/usage.html#config-access-log-format) and [DOWNSTREAM_DIRECT_LOCAL_ADDRESS_WITHOUT_PORT](https://www.envoyproxy.io/docs/envoy/v1.33.0/configuration/observability/access_log/usage.html#config-access-log-format).   
 
---

category: new_features  
area: quic  
summary: quic: add debug visitor to export various quic stats from quiche (#36813)  
commit: [ec94989f7ecce064a130ae43070352bbf4a0b7b6](https://github.com/envoyproxy/envoy/commit/ec94989f7ecce064a130ae43070352bbf4a0b7b6)  
pr: [36813](https://github.com/envoyproxy/envoy/pull/36813)  
description:  
Added [QUIC]() to get more stats from the QUIC transport.   
 
---

category: new_features  
area: http_inspector  
summary: [balsa] Add runtime flag for http_inspector parser (#36672)  
summary: changelogs: Release cleanups (#37934)  
commit: [6ccad8dd190d32dd04eaa0175782acb820d5eab6](https://github.com/envoyproxy/envoy/commit/6ccad8dd190d32dd04eaa0175782acb820d5eab6) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36672](https://github.com/envoyproxy/envoy/pull/36672) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added default-false ``envoy.reloadable_features.http_inspector_use_balsa_parser`` for ``HttpInspector`` to use ``BalsaParser``.   
 
---

category: new_features  
area: overload  
summary: add OLM scaling for max_connection_duration (#36816)  
commit: [ae4391145fb38487a3206e7b77c402d928857e7b](https://github.com/envoyproxy/envoy/commit/ae4391145fb38487a3206e7b77c402d928857e7b)  
pr: [36816](https://github.com/envoyproxy/envoy/pull/36816)  
description:  
Added support for scaling [max](). This can be used to reduce the max connection duration in response to overload.   
 
---

category: new_features  
area: tracers  
summary: Set resource `telemetry.sdk.*` and scope `otel.scope.name|version` attributes for the OpenTelemetry tracer (#36787)  
commit: [edec85a096933021d3d29e0cb4dc0a31b7c77879](https://github.com/envoyproxy/envoy/commit/edec85a096933021d3d29e0cb4dc0a31b7c77879)  
pr: [36787](https://github.com/envoyproxy/envoy/pull/36787)  
description:  
Set resource ``telemetry.sdk.*`` and scope ``otel.scope.name|version`` attributes for the OpenTelemetry tracer.   
 
---

category: new_features  
area: lua  
summary: tls: Expose well-known certificate subject fields in Lua filter (#35994)  
summary: changelogs: Release cleanups (#37934)  
commit: [82691c51ce277393b9484a684c9f9cf0c048a3bb](https://github.com/envoyproxy/envoy/commit/82691c51ce277393b9484a684c9f9cf0c048a3bb) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [35994](https://github.com/envoyproxy/envoy/pull/35994) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added SSL [parsedSubjectPeerCertificate]() API.   
 
---

category: new_features  
area: lua cluster specifier  
summary: lua cluster_specifier: give access to cluster connection/request counts (#36998)  
commit: [0342caf3ff2e103e0271d084d8ab212d5aef9841](https://github.com/envoyproxy/envoy/commit/0342caf3ff2e103e0271d084d8ab212d5aef9841)  
pr: [36998](https://github.com/envoyproxy/envoy/pull/36998)  
description:  
Added ability for a Lua script to query clusters for current requests and connections.   
 
---

category: new_features  
area: lua  
summary: add docs for lua filter and change log (#37246)  
commit: [44f175a7593d8adc3534ffae8d9f61a5bded3767](https://github.com/envoyproxy/envoy/commit/44f175a7593d8adc3534ffae8d9f61a5bded3767)  
pr: [37246](https://github.com/envoyproxy/envoy/pull/37246)  
description:  
Added [downstreamDirectLocalAddress]() method to the Stream info object API.   
 
---

category: new_features  
area: udp_proxy  
summary: udp_proxy: Support dynamic cluster selection per session (#36868)  
commit: [6c7d1b0337c42e80f34c54cb602251eec263f31e](https://github.com/envoyproxy/envoy/commit/6c7d1b0337c42e80f34c54cb602251eec263f31e)  
pr: [36868](https://github.com/envoyproxy/envoy/pull/36868)  
description:  
Added support for dynamic cluster selection in UDP proxy. The cluster can be set by one of the session filters by setting a per-session state object under the key ``envoy.udp_proxy.cluster``.   
 
---

category: new_features  
area: filters  
summary: auth: new api auth implementation (#36968)  
commit: [d2dbc0539b9399ab820ab0c94eea88c776533dfe](https://github.com/envoyproxy/envoy/commit/d2dbc0539b9399ab820ab0c94eea88c776533dfe)  
pr: [36968](https://github.com/envoyproxy/envoy/pull/36968)  
description:  
Added [the](), which can be used to authenticate requests using an API key.   
 
---

category: new_features  
area: CEL-attributes  
summary: attributes: add new attribute upstream.request_attempt_count (#36939)  
commit: [df6c32c5503988cd1b1d9bbe57aee04e99e0b693](https://github.com/envoyproxy/envoy/commit/df6c32c5503988cd1b1d9bbe57aee04e99e0b693)  
pr: [36939](https://github.com/envoyproxy/envoy/pull/36939)  
description:  
Added [attribute](https://www.envoyproxy.io/docs/envoy/v1.33.0/intro/arch_overview/advanced/attributes.html#arch-overview-attributes) ``upstream.request_attempt_count`` to get the number of times a request is attempted upstream.   
 
---

category: new_features  
area: ip-tagging  
summary: ip-tagging filter: add support for an optional ip-tag-header field (#36434)  
commit: [414ad34fb35ea90e50c04d6ed85f884dd3921de7](https://github.com/envoyproxy/envoy/commit/414ad34fb35ea90e50c04d6ed85f884dd3921de7)  
pr: [36434](https://github.com/envoyproxy/envoy/pull/36434)  
description:  
Adds support for specifying an alternate header [ip_tag_header](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/filters/http/ip_tagging/v3/ip_tagging.proto.html#envoy-v3-api-field-extensions-filters-http-ip-tagging-v3-iptagging-ip-tag-header) for appending IP tags via ip-tagging filter instead of using the default header ``x-envoy-ip-tags``.   
 
---

category: new_features  
area: c-ares  
summary: dns resolver: add options to initialize c-ares with custom timeout an (#36947)  
summary: changelogs: Release cleanups (#37934)  
commit: [0a2e904c7f1b8232e5e9700f2d995a76f4c84014](https://github.com/envoyproxy/envoy/commit/0a2e904c7f1b8232e5e9700f2d995a76f4c84014) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36947](https://github.com/envoyproxy/envoy/pull/36947) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added two new options to c-ares resolver for configuring custom timeouts and tries while resolving DNS queries. Custom timeouts could be configured by specifying [query_timeout_seconds](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/network/dns_resolver/cares/v3/cares_dns_resolver.proto.html#envoy-v3-api-field-extensions-network-dns-resolver-cares-v3-caresdnsresolverconfig-query-timeout-seconds) and custom tries could be configured by specifying [query_tries](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/network/dns_resolver/cares/v3/cares_dns_resolver.proto.html#envoy-v3-api-field-extensions-network-dns-resolver-cares-v3-caresdnsresolverconfig-query-tries).   
 
---

category: new_features  
area: rbac  
summary: rbac: add support for matching on route metadata (#36957)  
summary: changelogs: Release cleanups (#37934)  
commit: [8aabe0f9ae2834985f92b6a5e378a8c93bce0c7c](https://github.com/envoyproxy/envoy/commit/8aabe0f9ae2834985f92b6a5e378a8c93bce0c7c) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36957](https://github.com/envoyproxy/envoy/pull/36957) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added [sourced_metadata](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/rbac/v3/rbac.proto.html#envoy-v3-api-field-config-rbac-v3-permission-sourced-metadata) which allows specifying an optional source for the metadata to be matched in addition to the metadata matcher.   
 
---

category: new_features  
area: c-ares  
summary: dns: add round-robin nameserver rotation option to c-ares resolver (#37108)  
summary: changelogs: Release cleanups (#37934)  
summary: docs: fix typos in the current changelogs (#37879)  
commit: [b5c15a323dc20d02a50ee31227bb353cd8069df2](https://github.com/envoyproxy/envoy/commit/b5c15a323dc20d02a50ee31227bb353cd8069df2) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d) [aeb60e037a1937e2a2658ec0c7a72a5838e593ca](https://github.com/envoyproxy/envoy/commit/aeb60e037a1937e2a2658ec0c7a72a5838e593ca)  
pr: [37108](https://github.com/envoyproxy/envoy/pull/37108) [37934](https://github.com/envoyproxy/envoy/pull/37934) [37879](https://github.com/envoyproxy/envoy/pull/37879)  
description:  
Added nameserver rotation option to c-ares resolver. When enabled via [rotate_nameservers](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/network/dns_resolver/cares/v3/cares_dns_resolver.proto.html#envoy-v3-api-field-extensions-network-dns-resolver-cares-v3-caresdnsresolverconfig-rotate-nameservers), this performs round-robin selection of the configured nameservers for each resolution to help distribute query load.   
 
---

category: new_features  
area: access_log  
summary: access_log: add UPSTREAM_HOST_NAME_WITHOUT_PORT variable (#37114)  
commit: [4c0975228ab82e8c4965f351a4cbf771a027617f](https://github.com/envoyproxy/envoy/commit/4c0975228ab82e8c4965f351a4cbf771a027617f)  
pr: [37114](https://github.com/envoyproxy/envoy/pull/37114)  
description:  
Added support for [%UPSTREAM_HOST_NAME_WITHOUT_PORT%](https://www.envoyproxy.io/docs/envoy/v1.33.0/configuration/observability/access_log/usage.html#config-access-log-format-upstream-host-name-without-port) for the upstream host identifier without the port value.   
 
---

category: new_features  
area: udp_proxy  
summary: udp_proxy: support coexistence of dynamic and static clusters (#37016)  
commit: [0d67ec37e69e918add7d289a611bba6056578ccc](https://github.com/envoyproxy/envoy/commit/0d67ec37e69e918add7d289a611bba6056578ccc)  
pr: [37016](https://github.com/envoyproxy/envoy/pull/37016)  
description:  
Added support for coexistence of dynamic and static clusters in the same udp proxy, so we can use dynamic clusters for some sessions by setting a per-session state object under the key ``envoy.upstream.dynamic_host`` and routing to dynamic cluster, and we can use static clusters for other sessions by setting a per-session state object under the key ``envoy.udp_proxy.cluster`` without setting ``envoy.upstream.dynamic_host``.   
 
---

category: new_features  
area: ext_proc  
summary: Enable ext_proc HTTP service API (#37869)  
commit: [e2084ce79920723d1eaa1d332ff536cd23b4c49a](https://github.com/envoyproxy/envoy/commit/e2084ce79920723d1eaa1d332ff536cd23b4c49a)  
pr: [37869](https://github.com/envoyproxy/envoy/pull/37869)  
description:  
Added HTTP support in ext_proc filter to perform external processing with HTTP messages.   
 
---

category: new_features  
area: ext_authz  
summary: ext_authz: expose fields latency, bytesSent and bytesReceived for CEL and logging (#37074)  
summary: changelogs: Release cleanups (#37934)  
commit: [004e6eeaa6b4066f2ba62ca440bbcfb9fb3bc228](https://github.com/envoyproxy/envoy/commit/004e6eeaa6b4066f2ba62ca440bbcfb9fb3bc228) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37074](https://github.com/envoyproxy/envoy/pull/37074) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added filter state field ``latency_us``, ``bytesSent`` and ``bytesReceived`` access for CEL and logging.   
 
---

category: new_features  
area: sni_dynamic_forward_proxy  
summary: SNI dynamic forward proxy: Support saving resolved upstream address (#37099)  
commit: [7975a2b760c55dba724bd6c5dba2909e86aa309c](https://github.com/envoyproxy/envoy/commit/7975a2b760c55dba724bd6c5dba2909e86aa309c)  
pr: [37099](https://github.com/envoyproxy/envoy/pull/37099)  
description:  
Added support in SNI dynamic forward proxy for saving the resolved upstream address in the filter state. The state is saved with the key ``envoy.stream.upstream_address``.   
 
---

category: new_features  
area: lua  
summary: lua: add new function to set upstream host override (#37327)  
commit: [256f1078964d4b48c82d6f32ea5a274db8ecf065](https://github.com/envoyproxy/envoy/commit/256f1078964d4b48c82d6f32ea5a274db8ecf065)  
pr: [37327](https://github.com/envoyproxy/envoy/pull/37327)  
description:  
Added a new ``setUpstreamOverrideHost()`` which could be used to set the given host as the upstream host for the current request.   
 
---

category: new_features  
area: CEL-attributes  
summary: attributes: add upstream.cx_pool_ready_duration to get the duration of the upstream connection pool ready duration (#37318)  
commit: [dcf910802d8ce1b04073c53eeb40f3d9e9e4caf4](https://github.com/envoyproxy/envoy/commit/dcf910802d8ce1b04073c53eeb40f3d9e9e4caf4)  
pr: [37318](https://github.com/envoyproxy/envoy/pull/37318)  
description:  
Added [attribute](https://www.envoyproxy.io/docs/envoy/v1.33.0/intro/arch_overview/advanced/attributes.html#arch-overview-attributes) ``upstream.cx_pool_ready_duration`` to get the duration from when the upstream request was created to when the upstream connection pool is ready.   
 
---

category: new_features  
area: health_check  
summary: health_check: add stats counters to monitor health check behavior (#37409)  
commit: [f6bdcc61acccadd49ea1f4c6e3ef677692a22f11](https://github.com/envoyproxy/envoy/commit/f6bdcc61acccadd49ea1f4c6e3ef677692a22f11)  
pr: [37409](https://github.com/envoyproxy/envoy/pull/37409)  
description:  
Added new health check filter stats including total requests, successful/failed checks, cached responses, and cluster health status counters. These stats help track health check behavior and cluster health state.   
 
---

category: new_features  
area: http  
summary: header mutation: add query parameter mutation support (#37555)  
commit: [2fcdcf4b572de4908423b60022359fab7c4553b2](https://github.com/envoyproxy/envoy/commit/2fcdcf4b572de4908423b60022359fab7c4553b2)  
pr: [37555](https://github.com/envoyproxy/envoy/pull/37555)  
description:  
Add [query]() to [Header]() for adding/removing query parameters on a request.   
 
---

category: new_features  
area: local_ratelimit  
summary: ratelimit: new per descriptor hits-addend support and dynamic hits addend (#37567)  
commit: [cac9b87e9c0cd10eafc64817130c27c567395f4d](https://github.com/envoyproxy/envoy/commit/cac9b87e9c0cd10eafc64817130c27c567395f4d)  
pr: [37567](https://github.com/envoyproxy/envoy/pull/37567)  
description:  
Added per descriptor custom hits addend support for local rate limit filter. See [hits_addend](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-ratelimit-hits-addend) for more details.   
 
---

category: new_features  
area: filters  
summary: set_filter_state: enable per-route configuration override (#37507)  
summary: docs: fix typos in the current changelogs (#37879)  
commit: [359b54b7c6eb4a184eda0a758aab6fae125eba40](https://github.com/envoyproxy/envoy/commit/359b54b7c6eb4a184eda0a758aab6fae125eba40) [aeb60e037a1937e2a2658ec0c7a72a5838e593ca](https://github.com/envoyproxy/envoy/commit/aeb60e037a1937e2a2658ec0c7a72a5838e593ca)  
pr: [37507](https://github.com/envoyproxy/envoy/pull/37507) [37879](https://github.com/envoyproxy/envoy/pull/37879)  
description:  
Updated the ``set_filter_state`` [filter](https://www.envoyproxy.io/docs/envoy/v1.33.0/configuration/http/http_filters/set_filter_state.html#config-http-filters-set-filter-state) to support per-route overrides.   
 
---

category: new_features  
area: grpc-json  
summary: http_filter: Add gRPC JSON reverse transcoder filter (#37418)  
commit: [b846d18527cf0867dcfd316c4323ea26fab78f9d](https://github.com/envoyproxy/envoy/commit/b846d18527cf0867dcfd316c4323ea26fab78f9d)  
pr: [37418](https://github.com/envoyproxy/envoy/pull/37418)  
description:  
Added a new http filter for [gRPC]().   
 
---

category: new_features  
area: matchers  
summary: Add filter state IP matcher (#37637)  
commit: [d3e3b35cd8538186d4ccb365f2fa87c9b8567d5e](https://github.com/envoyproxy/envoy/commit/d3e3b35cd8538186d4ccb365f2fa87c9b8567d5e)  
pr: [37637](https://github.com/envoyproxy/envoy/pull/37637)  
description:  
Added new filter state matcher ip_range to [FilterStateMatcher](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/type/matcher/v3/filter_state.proto.html#envoy-v3-api-msg-type-matcher-v3-filterstatematcher) which attempts to cast the filter state object to an IP and match it against a list of CidrRanges. To support this, also added an [AddressMatcher](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/type/matcher/v3/address.proto.html#envoy-v3-api-msg-type-matcher-v3-addressmatcher).   
 
---

category: new_features  
area: attributes  
summary: expr: add new xds vhost attributes support (#37650)  
summary: changelogs: Release cleanups (#37934)  
commit: [02291886543961e5bff98033f85fd7f9f1d1763c](https://github.com/envoyproxy/envoy/commit/02291886543961e5bff98033f85fd7f9f1d1763c) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [37650](https://github.com/envoyproxy/envoy/pull/37650) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
Added new ``xds.virtual_host_name`` and ``xds.virtual_host_metadata`` attributes support. See [attributes](https://www.envoyproxy.io/docs/envoy/v1.33.0/intro/arch_overview/advanced/attributes.html#arch-overview-attributes) for looking up xDS configuration information.   
 
---

category: new_features  
area: redis  
summary: [redis_proxy] Add support for UNWATCH (#37620)  
summary: docs: fix typos in the current changelogs (#37879)  
commit: [ac61d8e000adc56d7505517cb4d6af5b82e08d22](https://github.com/envoyproxy/envoy/commit/ac61d8e000adc56d7505517cb4d6af5b82e08d22) [aeb60e037a1937e2a2658ec0c7a72a5838e593ca](https://github.com/envoyproxy/envoy/commit/aeb60e037a1937e2a2658ec0c7a72a5838e593ca)  
pr: [37620](https://github.com/envoyproxy/envoy/pull/37620) [37879](https://github.com/envoyproxy/envoy/pull/37879)  
description:  
Added support for ``UNWATCH`` command.   
 
---

category: new_features  
area: ratelimit  
summary: global rate limit: supported ratelimits  in the typed per filter config (#37684)  
commit: [aba0fe82f7e6a98ccd896c63a888f01722696a1a](https://github.com/envoyproxy/envoy/commit/aba0fe82f7e6a98ccd896c63a888f01722696a1a)  
pr: [37684](https://github.com/envoyproxy/envoy/pull/37684)  
description:  
Add the [rate_limits](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/filters/http/ratelimit/v3/rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-ratelimit-v3-ratelimitperroute-rate-limits) field to generate rate limit descriptors. If this field is set, the [VirtualHost]() or [RouteAction]() fields will be ignored.   
 
---

category: new_features  
area: ratelimit  
summary: http-ratelimit: add release note for apply_on_stream_done ratelimit API (#37775)  
commit: [38094dfc885f174f97ab0c8b6dfbde01b15295b3](https://github.com/envoyproxy/envoy/commit/38094dfc885f174f97ab0c8b6dfbde01b15295b3)  
pr: [37775](https://github.com/envoyproxy/envoy/pull/37775)  
description:  
Add the option to reduce the rate limit budget based on request/response contexts on stream done. See [apply_on_stream_done](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-ratelimit-apply-on-stream-done) for more details.   
 
---

category: new_features  
area: udp_proxy  
summary: support backoff between retries in udp_proxy (#37912)  
commit: [24254316bab17cb48d48f88297e91a3dee739f58](https://github.com/envoyproxy/envoy/commit/24254316bab17cb48d48f88297e91a3dee739f58)  
pr: [37912](https://github.com/envoyproxy/envoy/pull/37912)  
description:  
Added support for [backoff_options](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/filters/udp/udp_proxy/v3/udp_proxy.proto.html#envoy-v3-api-field-extensions-filters-udp-udp-proxy-v3-udpproxyconfig-udptunnelingconfig-retryoptions-backoff-options) to configure the backoff strategy for UDP proxy retries when tunneling over HTTP.   
 
---

category: new_features  
area: lua  
summary: lua: add new function to get the name of the matched route (#37877)  
commit: [3a56fed963eacf052f5fa1b8c81717063d78ca34](https://github.com/envoyproxy/envoy/commit/3a56fed963eacf052f5fa1b8c81717063d78ca34)  
pr: [37877](https://github.com/envoyproxy/envoy/pull/37877)  
description:  
Added [routeName]() API to the Stream Info Object to get the name of the route matched by the filter chain.   
 
---

category: new_features  
area: ratelimit  
summary: ratelimit: added support for rate limiting based on query parameters (#37875)  
commit: [f39486a9f152d6d6a882291ecdcad2ca390247ce](https://github.com/envoyproxy/envoy/commit/f39486a9f152d6d6a882291ecdcad2ca390247ce)  
pr: [37875](https://github.com/envoyproxy/envoy/pull/37875)  
description:  
added support for query parameter rate limiting via the [query_parameters](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-ratelimit-action-query-parameters) action across HTTP and Thrift. This allows rate limiting based on specific query parameter values, with option to control the behavior when the query parameter is absent.   
 
---

category: new_features  
area: access log  
summary: Add option to suppress deprecated warning logs. (#37407)  
commit: [9c92139dcea0bfc6d355aaf6eeb7987b5ed4a20d](https://github.com/envoyproxy/envoy/commit/9c92139dcea0bfc6d355aaf6eeb7987b5ed4a20d)  
pr: [37407](https://github.com/envoyproxy/envoy/pull/37407)  
description:  
Added new command-line flag [--skip-deprecated-logs](https://www.envoyproxy.io/docs/envoy/latest/operations/cli#cmdoption-skip-deprecated-logs).   
 
---

category: deprecated  
area: rbac  
summary: rbac: add support for matching on route metadata (#36957)  
summary: changelogs: Release cleanups (#37934)  
commit: [8aabe0f9ae2834985f92b6a5e378a8c93bce0c7c](https://github.com/envoyproxy/envoy/commit/8aabe0f9ae2834985f92b6a5e378a8c93bce0c7c) [9aaef9877ad5cebbab0dd56a3e99da20b92ab29d](https://github.com/envoyproxy/envoy/commit/9aaef9877ad5cebbab0dd56a3e99da20b92ab29d)  
pr: [36957](https://github.com/envoyproxy/envoy/pull/36957) [37934](https://github.com/envoyproxy/envoy/pull/37934)  
description:  
[metadata](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/rbac/v3/rbac.proto.html#envoy-v3-api-field-config-rbac-v3-permission-metadata) is now deprecated in favor of [sourced_metadata](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/rbac/v3/rbac.proto.html#envoy-v3-api-field-config-rbac-v3-permission-sourced-metadata).   
 
---

category: deprecated  
area: cluster  
summary: Refactor dns cluster api (#36353)  
summary: docs: fix typos in the current changelogs (#37879)  
commit: [640fcc0f2637c50c51bdd831de26c588debc9277](https://github.com/envoyproxy/envoy/commit/640fcc0f2637c50c51bdd831de26c588debc9277) [aeb60e037a1937e2a2658ec0c7a72a5838e593ca](https://github.com/envoyproxy/envoy/commit/aeb60e037a1937e2a2658ec0c7a72a5838e593ca)  
pr: [36353](https://github.com/envoyproxy/envoy/pull/36353) [37879](https://github.com/envoyproxy/envoy/pull/37879)  
description:  
DNS-related fields in [Cluster](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-msg-config-cluster-v3-cluster) are deprecated when using strict and logical DNS clusters. Instead, use the [cluster_type](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-cluster-type) extension point with [typed_config](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-customclustertype-typed-config) of type [DnsCluster](https://www.envoyproxy.io/docs/envoy/v1.33.0/api-v3/extensions/clusters/dns/v3/dns_cluster.proto.html#envoy-v3-api-msg-extensions-clusters-dns-v3-dnscluster).   
 
---

category: deprecated  
area: aws_iam  
summary: aws_iam: deprecate extension and mark for future deletion (#37596)  
commit: [a4b06fdf51be789c69c65104c67fe69b67e88c35](https://github.com/envoyproxy/envoy/commit/a4b06fdf51be789c69c65104c67fe69b67e88c35)  
pr: [37596](https://github.com/envoyproxy/envoy/pull/37596)  
description:  
The [aws_iam]() is deprecated and will be deleted from Envoy in a future release, no later than Envoy 1.35, but possibly sooner.   
 
---

