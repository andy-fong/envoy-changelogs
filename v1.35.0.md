# Envoy Release v1.35.0

[release note](https://www.envoyproxy.io/docs/envoy/latest/version_history/v1.35/v1.35.0)

## behavior_changes

**category**   : behavior_changes  
**area**       : aws_iam  
**summary**    : deps: delete curl and extensions/grpc_creds/aws_iam (#39138)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [06f25d8ceba40bffc02bd83b8d3b4962925d088c](https://github.com/envoyproxy/envoy/commit/06f25d8ceba40bffc02bd83b8d3b4962925d088c) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39138](https://github.com/envoyproxy/envoy/pull/39138) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
As announced in November 2024 (see https://github.com/envoyproxy/envoy/issues/37621), the ``grpc_credentials/aws_iam`` extension is being deleted. Any configuration referencing this extension will fail to load.   
 
---

**category**   : behavior_changes  
**area**       : prefix_match_map  
**summary**    : Make route prefix map matchers able to retry (#38986)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [e17a126c3e723671fd6a463677ced785dbbbc646](https://github.com/envoyproxy/envoy/commit/e17a126c3e723671fd6a463677ced785dbbbc646) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [38986](https://github.com/envoyproxy/envoy/pull/38986) [40219](https://github.com/envoyproxy/envoy/pull/40219) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
[prefix_match_map](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/config/common/matcher/v3/matcher.proto.html#envoy-v3-api-field-config-common-matcher-v3-matcher-matchertree-prefix-match-map) now continues to search for a match with a shorter prefix if a longer match does not find an action. This brings it in line with the behavior of ``matcher_list``. This change can temporarily be reverted by setting the runtime guard ``envoy.reloadable_features.prefix_map_matcher_resume_after_subtree_miss`` to ``false``. If the old behavior is desired more permanently, this can be achieved in config by setting an ``on_no_match`` action that responds with ``404`` for each subtree.   
 
---

**category**   : behavior_changes  
**area**       : server  
**summary**    : os: raise soft limits automatically (#39660)  
**commit**     : [e49feff35f0d9e79c2de28f7613bc4adb40a691a](https://github.com/envoyproxy/envoy/commit/e49feff35f0d9e79c2de28f7613bc4adb40a691a)  
**pr**         : [39660](https://github.com/envoyproxy/envoy/pull/39660)  
**description**:  
Envoy will automatically raise the soft limit on the file descriptors to the hard limit. This behavior can be reverted using the runtime guard ``envoy_restart_features_raise_file_limits``.   
 
---

**category**   : behavior_changes  
**area**       : build  
**summary**    : bazel: Remove clang-libstdc++ toolchain and rationalize flags (#39755)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [0a28910a611846b6d16f84b9cbcf35b3657038de](https://github.com/envoyproxy/envoy/commit/0a28910a611846b6d16f84b9cbcf35b3657038de) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39755](https://github.com/envoyproxy/envoy/pull/39755) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Removed the ``clang-libstdc++`` toolchain setup as this is no longer used or tested by the project. Consolidated Clang and GCC toolchains which can be used with ``--config=clang`` or ``--config=gcc``. These use ``libc++`` and ``libstdc++`` respectively.   
 
---

**category**   : behavior_changes  
**area**       : squash_filter  
**summary**    : contrib: delete squash filter (#40135)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [668642e2b8c4f5d1bfa144ce99c7583ed26ccc87](https://github.com/envoyproxy/envoy/commit/668642e2b8c4f5d1bfa144ce99c7583ed26ccc87) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [40135](https://github.com/envoyproxy/envoy/pull/40135) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
The Squash HTTP filter in ``contrib`` has been deleted. The project it provided integration with has been idle for five years and appears abandoned.   
 
---

**category**   : behavior_changes  
**area**       : wasm  
**summary**    : deps: update `v8` to 13.8.258.26 (#40305)  
**commit**     : [86e62323fca8c46c927a020d7301383c83aceb93](https://github.com/envoyproxy/envoy/commit/86e62323fca8c46c927a020d7301383c83aceb93)  
**pr**         : [40305](https://github.com/envoyproxy/envoy/pull/40305)  
**description**:  
Bumped up V8 version to ``13.8.258.26`` to address multiple CVEs.   
 
---

## minor_behavior_changes

**category**   : minor_behavior_changes  
**area**       : geoip  
**summary**    : Allow asn header to be populate from isp_db in MaxMind geoip provider. (#39303)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [a5dbcbe81a54910c02aa76854d1396244d65d584](https://github.com/envoyproxy/envoy/commit/a5dbcbe81a54910c02aa76854d1396244d65d584) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39303](https://github.com/envoyproxy/envoy/pull/39303) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
The lookup for ASN information is fetched from ``asn_db`` if ``asn_db_path`` is defined and from ``isp_db`` if ``asn_db_path`` is not defined.   
 
---

**category**   : minor_behavior_changes  
**area**       : lua  
**summary**    : lua: use filter config name to get metadata first (#39085)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [beb1c3f08f7d3068a5dc3cf3af1dc75d8a9b3220](https://github.com/envoyproxy/envoy/commit/beb1c3f08f7d3068a5dc3cf3af1dc75d8a9b3220) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39085](https://github.com/envoyproxy/envoy/pull/39085) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
The ``metadata()`` of the Lua filter now will search the metadata by the [filter]() first. And if not found, it will search by the canonical name of the filter ``envoy.filters.http.lua``.   
 
---

**category**   : minor_behavior_changes  
**area**       : grpc-json  
**summary**    : Configurable print options for reverse transcoder (#38997)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [32c0640b676861a8b95e9aa60d58efbd46ada7c7](https://github.com/envoyproxy/envoy/commit/32c0640b676861a8b95e9aa60d58efbd46ada7c7) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [38997](https://github.com/envoyproxy/envoy/pull/38997) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Made the [gRPC]() JSON print options configurable.   
 
---

**category**   : minor_behavior_changes  
**area**       : oauth2  
**summary**    : oauth2: Reset CSRF token when token validation fails during redirection (#39213)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [79acec19086d635559b4406a7d1c1fd29fb195cf](https://github.com/envoyproxy/envoy/commit/79acec19086d635559b4406a7d1c1fd29fb195cf) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39213](https://github.com/envoyproxy/envoy/pull/39213) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Reset CSRF token when token validation fails during redirection. If the CSRF token cookie is present during the redirection to the authorization server, it will be validated. Previously, if this validation failed, the OAuth flow would fail. Now the CSRF token will simply be reset. This fixes the case where an HMAC secret change causes a redirect flow, but the CSRF token cookie hasn't yet expired causing a CSRF token validation failure.   
 
---

**category**   : minor_behavior_changes  
**area**       : cel  
**summary**    : [cel] Enable precompilation of regexes in cel expressions (#39230)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [a867ef50683275d96e7468067c6241d6b50cc72b](https://github.com/envoyproxy/envoy/commit/a867ef50683275d96e7468067c6241d6b50cc72b) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39230](https://github.com/envoyproxy/envoy/pull/39230) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Precompile regexes in CEL expressions. This can be disabled by setting the runtime guard ``envoy.reloadable_features.enable_cel_regex_precompilation`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : dns  
**summary**    : dns: Allow getaddrinfo to run in a thread pool (#39283)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [4c8c53594f7ff0697a6b7e64b0ca2135745e4331](https://github.com/envoyproxy/envoy/commit/4c8c53594f7ff0697a6b7e64b0ca2135745e4331) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39283](https://github.com/envoyproxy/envoy/pull/39283) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Allow ``getaddrinfo`` to be configured to run by a thread pool, controlled by [num_resolver_threads](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/network/dns_resolver/getaddrinfo/v3/getaddrinfo_dns_resolver.proto.html#envoy-v3-api-field-extensions-network-dns-resolver-getaddrinfo-v3-getaddrinfodnsresolverconfig-num-resolver-threads).   
 
---

**category**   : minor_behavior_changes  
**area**       : dns  
**summary**    : Replace c-ares with getAddrInfo DNS resolver in DFP integration tests (#39901)  
**commit**     : [d0776b518acdc2a8a0208d52576a732aa442f55a](https://github.com/envoyproxy/envoy/commit/d0776b518acdc2a8a0208d52576a732aa442f55a)  
**pr**         : [39901](https://github.com/envoyproxy/envoy/pull/39901)  
**description**:  
Honor the default DNS resolver configuration in the bootstrap config [typed_dns_resolver_config](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-bootstrap-typed-dns-resolver-config) if the DNS cache configuration in the dynamic forward proxy filter is empty [dns_cache_config](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/dynamic_forward_proxy/v3/dynamic_forward_proxy.proto.html#envoy-v3-api-field-extensions-filters-http-dynamic-forward-proxy-v3-filterconfig-dns-cache-config).   
 
---

**category**   : minor_behavior_changes  
**area**       : grpc-json-transcoding  
**summary**    : Add SSE style message framing for streamed responses (#39325)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [b4d9b4a21f680c25baccd67a5119b661f2fea9d0](https://github.com/envoyproxy/envoy/commit/b4d9b4a21f680c25baccd67a5119b661f2fea9d0) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39325](https://github.com/envoyproxy/envoy/pull/39325) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added SSE style message framing for streamed responses in [gRPC]().   
 
---

**category**   : minor_behavior_changes  
**area**       : http  
**summary**    : clean up router: remove part of DebugConfig and simlify the header mutation (#39534)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [d74af8abd1739d4a167c2f3ee388d1e7eb87ebce](https://github.com/envoyproxy/envoy/commit/d74af8abd1739d4a167c2f3ee388d1e7eb87ebce) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39534](https://github.com/envoyproxy/envoy/pull/39534) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
[response_headers_to_add](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-route-response-headers-to-add) and [response_headers_to_remove](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-route-response-headers-to-remove) will also be applied to the local responses from the ``envoy.filters.http.router`` filter.   
 
---

**category**   : minor_behavior_changes  
**area**       : tracing  
**summary**    : Avoid trace span buffer becoming too large (#39609)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [6baa92cce58a74893283dcc79bacbc2dad913cac](https://github.com/envoyproxy/envoy/commit/6baa92cce58a74893283dcc79bacbc2dad913cac) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39609](https://github.com/envoyproxy/envoy/pull/39609) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added [max_cache_size](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/config/trace/v3/opentelemetry.proto.html#envoy-v3-api-field-config-trace-v3-opentelemetryconfig-max-cache-size) to the OpenTelemetry tracer config. This limits the number of spans that can be cached before flushing.   
 
---

**category**   : minor_behavior_changes  
**area**       : aws  
**summary**    : aws: clean up credential provider creation and support additional providers in proto (#39616)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [c1a04a6f07f448266445ab6d657e174e3ec293dc](https://github.com/envoyproxy/envoy/commit/c1a04a6f07f448266445ab6d657e174e3ec293dc) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39616](https://github.com/envoyproxy/envoy/pull/39616) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
[AwsCredentialProvider](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/common/aws/v3/credential_provider.proto.html#envoy-v3-api-msg-extensions-common-aws-v3-awscredentialprovider) now supports all defined credential providers, allowing complete customization of the credential provider chain when using AWS request signing extension.   
 
---

**category**   : minor_behavior_changes  
**area**       : ext_proc  
**summary**    : ext_proc: handle server error response based on the failure_mode_allow config (#39994)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [ede5b0b15c24eb20f419b675d15ec32333b61980](https://github.com/envoyproxy/envoy/commit/ede5b0b15c24eb20f419b675d15ec32333b61980) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39994](https://github.com/envoyproxy/envoy/pull/39994) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
If the ext_proc server sends a spurious response message to Envoy, Envoy now performs fail-open or fail-close action based on [failure_mode_allow](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-failure-mode-allow) configuration. This change can be reverted by setting the runtime guard ``envoy.reloadable_features.ext_proc_fail_close_spurious_resp`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : filters  
**summary**    : api: remov WIP for CredentialInjector (#39984)  
**commit**     : [c5508e5ce355a7720cbef183e2b870224ba85d65](https://github.com/envoyproxy/envoy/commit/c5508e5ce355a7720cbef183e2b870224ba85d65)  
**pr**         : [39984](https://github.com/envoyproxy/envoy/pull/39984)  
**description**:  
[Credential]() is no longer a work in progress field.   
 
---

**category**   : minor_behavior_changes  
**area**       : oauth2  
**summary**    : oauth2 filter: encrypt tokens (#39059)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [26c0c23ef12fd97158e8bdd8d6b074208702ea34](https://github.com/envoyproxy/envoy/commit/26c0c23ef12fd97158e8bdd8d6b074208702ea34) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39059](https://github.com/envoyproxy/envoy/pull/39059) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
The access token, ID token and refresh token in the cookies are now encrypted using the HMAC secret. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.oauth2_encrypt_tokens`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : http3  
**summary**    : changelog: Add a note about upgrade to C++20 (#40049)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [1b2fece5759cc390d9a2d3284b37eeacb722d027](https://github.com/envoyproxy/envoy/commit/1b2fece5759cc390d9a2d3284b37eeacb722d027) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [40049](https://github.com/envoyproxy/envoy/pull/40049) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Validate HTTP/3 pseudo headers. Can be disabled by setting ``envoy.restart_features.validate_http3_pseudo_headers`` to ``false``.   
 
---

**category**   : minor_behavior_changes  
**area**       : formatter  
**summary**    : route: keep the matched virtual host in the stream info (#40065)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [9172ed81f2b6107e76bd64f17ec2779fd8f212ac](https://github.com/envoyproxy/envoy/commit/9172ed81f2b6107e76bd64f17ec2779fd8f212ac) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [40065](https://github.com/envoyproxy/envoy/pull/40065) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Now the ``METADATA`` and ``CEL`` substitution formatters can access or log the metadata of the virtual host in case the route is not matched but the virtual host is found.   
 
---

**category**   : minor_behavior_changes  
**area**       : oauth2  
**summary**    : Mark oauth2 extension as stable (#40193)  
**commit**     : [1ff11ab6af9f0f64301873dfd4f0625316389473](https://github.com/envoyproxy/envoy/commit/1ff11ab6af9f0f64301873dfd4f0625316389473)  
**pr**         : [40193](https://github.com/envoyproxy/envoy/pull/40193)  
**description**:  
Extension status changed from ``alpha`` to ``stable``.   
 
---

**category**   : minor_behavior_changes  
**area**       : oauth2  
**summary**    : Remove OAuth2 cookies before forwarding the requests (#40228)  
**summary**    : repo: Release v1.35.0  
**commit**     : [5687093822076cca480f6e461aea5a856e23d79f](https://github.com/envoyproxy/envoy/commit/5687093822076cca480f6e461aea5a856e23d79f) [84305a6cb64bd55aaf606bdd53de7cd6080427a1](https://github.com/envoyproxy/envoy/commit/84305a6cb64bd55aaf606bdd53de7cd6080427a1)  
**pr**         : [40228](https://github.com/envoyproxy/envoy/pull/40228)  
**description**:  
Starting from this release, these cookies: oauth_hmac,oauth_expires,refresh_token,oauth_nonce,code_verifier will not be forwarded to the upstream. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.oauth2_cleanup_cookies`` to ``false``.   
 
---

## bug_fixes

**category**   : bug_fixes  
**area**       : geoip  
**summary**    : Fix a bug on Geoip maxmind apple_private_relay to check if apple_private_relay is set instead of isp header. (#40338)  
**commit**     : [1bf057b418e6c783c8e7a9f3e0d25a8b2f161e9d](https://github.com/envoyproxy/envoy/commit/1bf057b418e6c783c8e7a9f3e0d25a8b2f161e9d)  
**pr**         : [40338](https://github.com/envoyproxy/envoy/pull/40338)  
**description**:  
Fixed a bug where the ``apple_private_relay`` header was not populated correctly when isp header wasn't set.   
 
---

**category**   : bug_fixes  
**area**       : conn_pool  
**summary**    : conn pool: fix issue that can lead to insufficient connections (#39310)  
**summary**    : conn pool: fixed a bug with mixed connection pool capacity (#39349)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [e44c4ebba793c340a81b18dd340f71db7e68f41d](https://github.com/envoyproxy/envoy/commit/e44c4ebba793c340a81b18dd340f71db7e68f41d) [5b9a855cc052e1ae948b12d4cdb081284ff7cb73](https://github.com/envoyproxy/envoy/commit/5b9a855cc052e1ae948b12d4cdb081284ff7cb73) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39310](https://github.com/envoyproxy/envoy/pull/39310) [39349](https://github.com/envoyproxy/envoy/pull/39349) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed an issue that could lead to too many connections when using [AutoHttpConfig](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/upstreams/http/v3/http_protocol_options.proto.html#envoy-v3-api-msg-extensions-upstreams-http-v3-httpprotocoloptions-autohttpconfig) if the established connection is HTTP/2 and Envoy predicted it would have lower concurrent capacity.   
 
---

**category**   : bug_fixes  
**area**       : conn_pool  
**summary**    : conn pool: fixed a bug with mixed connection pool capacity (#39349)  
**summary**    : conn pool: fix issue that can lead to insufficient connections (#39310)  
**commit**     : [5b9a855cc052e1ae948b12d4cdb081284ff7cb73](https://github.com/envoyproxy/envoy/commit/5b9a855cc052e1ae948b12d4cdb081284ff7cb73) [e44c4ebba793c340a81b18dd340f71db7e68f41d](https://github.com/envoyproxy/envoy/commit/e44c4ebba793c340a81b18dd340f71db7e68f41d)  
**pr**         : [39349](https://github.com/envoyproxy/envoy/pull/39349) [39310](https://github.com/envoyproxy/envoy/pull/39310)  
**description**:  
Fixed an issue that could lead to insufficient connections for current pending requests. If a connection starts draining while it has negative unused capacity (which happens if an HTTP/2 ``SETTINGS`` frame reduces allowed concurrency to below the current number of requests), that connection's unused capacity will be included in total pool capacity even though it is unusable because it is draining. This can result in not enough connections being established for current pending requests. This is most problematic for long-lived requests (such as streaming gRPC requests or long-poll requests) because a connection could be in the draining state for a long time.   
 
---

**category**   : bug_fixes  
**area**       : hcm  
**summary**    : hcm: Ensure operations are not called on deleted stream decoders (#39346)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [b701b033689be044e31e714f60a0f9265d2800ce](https://github.com/envoyproxy/envoy/commit/b701b033689be044e31e714f60a0f9265d2800ce) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39346](https://github.com/envoyproxy/envoy/pull/39346) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed a bug where the lifetime of the ``HttpConnectionManager``'s ``ActiveStream`` can be out of sync with the lifetime of the codec stream.   
 
---

**category**   : bug_fixes  
**area**       : config_validation  
**summary**    : fix: fix a bug where the validate mode may assert failure (#39761)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [e52309ec7477dbc6a7e24dadc59845ed43c4d284](https://github.com/envoyproxy/envoy/commit/e52309ec7477dbc6a7e24dadc59845ed43c4d284) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39761](https://github.com/envoyproxy/envoy/pull/39761) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed a bug where the config validation server will crash when the configuration contains ``%CEL%`` or ``%METADATA%`` substitution formatter.   
 
---

**category**   : bug_fixes  
**area**       : tls  
**summary**    : tls: fix incorrectly cached empty peer certificate values (#40179)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [72833beab4fdc87f7fc53ec31ab70fd734581720](https://github.com/envoyproxy/envoy/commit/72833beab4fdc87f7fc53ec31ab70fd734581720) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [40179](https://github.com/envoyproxy/envoy/pull/40179) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed an issue with incorrectly cached connection properties on TLS connections. If TLS connection data was queried before it was available, an empty value was being incorrectly cached, preventing later calls from getting the correct value. This could be triggered with a ``tcp_proxy`` access log configured to emit a log upon connection establishment if the log contains fields of the TLS peer certificate. Then a later use of the data, such as the network RBAC filter validating a peer certificate SAN, may incorrectly fail due to the empty cached value.   
 
---

**category**   : bug_fixes  
**area**       : quic  
**summary**    : Fixes a bug in Envoy's HTTP/3-to-HTTP/1 proxying when a transfer-enco… (#39589)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [cde9aeb4273e04948755a7466b92c98f460552bb](https://github.com/envoyproxy/envoy/commit/cde9aeb4273e04948755a7466b92c98f460552bb) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39589](https://github.com/envoyproxy/envoy/pull/39589) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed a bug in Envoy's HTTP/3-to-HTTP/1 proxying when a ``transfer-encoding`` header is incorrectly appended. Protected by runtime guard ``envoy.reloadable_features.quic_signal_headers_only_to_http1_backend``.   
 
---

**category**   : bug_fixes  
**area**       : runtime  
**summary**    : runtime: fix errors when using legacy header limit settings (#40172)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [4671ca5d66c419f6819809f6d4c9b8367c594ead](https://github.com/envoyproxy/envoy/commit/4671ca5d66c419f6819809f6d4c9b8367c594ead) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [40172](https://github.com/envoyproxy/envoy/pull/40172) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed a bug which resulted in an ``ENVOY_BUG`` being incorrectly triggered when runtime settings ``envoy.reloadable_features.max_request_headers_count``, ``envoy.reloadable_features.max_response_headers_count``, ``envoy.reloadable_features.max_request_headers_size_kb``, or ``envoy.reloadable_features.max_response_headers_size_kb`` were set.   
 
---

**category**   : bug_fixes  
**area**       : tls  
**summary**    : tls_validation_context: fix empty trusted ca (#39751)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [e80587d30266128017d6d0928226354562552a5e](https://github.com/envoyproxy/envoy/commit/e80587d30266128017d6d0928226354562552a5e) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39751](https://github.com/envoyproxy/envoy/pull/39751) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed a bug where empty trusted CA file or inline string is accepted and causes Envoy to successfully validate any certificate chain. This fix addresses this issue by rejecting such configuration with empty value. This behavior can be reverted by setting the runtime guard ``envoy.reloadable_features.reject_empty_trusted_ca_file`` to ``false``.   
 
---

**category**   : bug_fixes  
**area**       : tls_inspector  
**summary**    : tls_inspector: correctly handle client hello larger than boringssl allows (#39903)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [d82311579df9bcd1ac66051378abb3a3a6d2d259](https://github.com/envoyproxy/envoy/commit/d82311579df9bcd1ac66051378abb3a3a6d2d259) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39903](https://github.com/envoyproxy/envoy/pull/39903) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed a bug where the TLS inspector filter would not correctly report ``client_hello_too_large`` stat for too big client hello messages, i.e., bigger than 16 KB.   
 
---

**category**   : bug_fixes  
**area**       : wasm  
**summary**    : wasm: fix wasm hang after crash in the request callabck (#40166)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [bd3136178f84ba76f481c6ca588f589a074719e7](https://github.com/envoyproxy/envoy/commit/bd3136178f84ba76f481c6ca588f589a074719e7) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [40166](https://github.com/envoyproxy/envoy/pull/40166) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Fixed a bug where the Wasm filter hangs when the VM is crashed in the request callbacks.   
 
---

**category**   : bug_fixes  
**area**       : dynatrace  
**summary**    : changelogs: Add entry for dynatrace div by zero fix (#40290)  
**commit**     : [d0274a7389a86262d95ae347ce850e93a19d6ea2](https://github.com/envoyproxy/envoy/commit/d0274a7389a86262d95ae347ce850e93a19d6ea2)  
**pr**         : [40290](https://github.com/envoyproxy/envoy/pull/40290)  
**description**:  
Fixed a division by zero bug in the Dynatrace sampling controller that occurred when ``total_wanted`` was less than ``top_k_size``. The calculation was refactored to avoid the intermediate division that could result in zero.   
 
---

**category**   : bug_fixes  
**area**       : wasm  
**summary**    : wasm/deps: Add changelog for wasmtime bump (#40362)  
**commit**     : [161d47b5d600d47cccab8d5df7d65e01c849153d](https://github.com/envoyproxy/envoy/commit/161d47b5d600d47cccab8d5df7d65e01c849153d)  
**pr**         : [40362](https://github.com/envoyproxy/envoy/pull/40362)  
**description**:  
Bumped wasmtime version to 24.0.2 to address CVE.   
 
---

## removed_config_or_runtime

**category**   : removed_config_or_runtime  
**area**       : websocket  
**summary**    : websocket: remove websocket switch protocol check runtime guard (#39159)  
**commit**     : [19b31dbe5542b2f0a0e4574f47811ef225a134eb](https://github.com/envoyproxy/envoy/commit/19b31dbe5542b2f0a0e4574f47811ef225a134eb)  
**pr**         : [39159](https://github.com/envoyproxy/envoy/pull/39159)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.switch_protocol_websocket_handshake`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http2  
**summary**    : runtime: delete http2_no_protocol_error_upon_clean_close (#39177)  
**commit**     : [7ec20a37f7778f802fd13c88b3721d6d1ae99d41](https://github.com/envoyproxy/envoy/commit/7ec20a37f7778f802fd13c88b3721d6d1ae99d41)  
**pr**         : [39177](https://github.com/envoyproxy/envoy/pull/39177)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.http2_no_protocol_error_upon_clean_close`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : access_log  
**summary**    : runtime: remove SNI sanitize runtime guard in access log (#39158)  
**commit**     : [778d5d7027f524fb5463f0f326b95e4798d2b8d4](https://github.com/envoyproxy/envoy/commit/778d5d7027f524fb5463f0f326b95e4798d2b8d4)  
**pr**         : [39158](https://github.com/envoyproxy/envoy/pull/39158)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.sanitize_sni_in_access_log`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : quic  
**summary**    : runtime: Remove `quic_connect_client_udp_sockets` and legacy code paths (#39161)  
**commit**     : [72fd99b8c3681e413eb40ecaebfb1c3454810763](https://github.com/envoyproxy/envoy/commit/72fd99b8c3681e413eb40ecaebfb1c3454810763)  
**pr**         : [39161](https://github.com/envoyproxy/envoy/pull/39161)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.quic_connect_client_udp_sockets`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : quic  
**summary**    : quic: remove runtime setting quic_support_certificate_compression (#39178)  
**commit**     : [91e07fe4f1a75b105b177c98fbd9a53815a98257](https://github.com/envoyproxy/envoy/commit/91e07fe4f1a75b105b177c98fbd9a53815a98257)  
**pr**         : [39178](https://github.com/envoyproxy/envoy/pull/39178)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.quic_support_certificate_compression`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http  
**summary**    : http: Removed runtime guard envoy_reloadable_features_filter_access_loggers_first (#39172)  
**summary**    : http: deprecate envoy_reloadable_features_internal_authority_header_validator (#39226)  
**commit**     : [af026910b820e7d461a65e6c3f07ac0353ec76a8](https://github.com/envoyproxy/envoy/commit/af026910b820e7d461a65e6c3f07ac0353ec76a8) [d1f228d4e6b06cca9304984c9484769b2fc7fc22](https://github.com/envoyproxy/envoy/commit/d1f228d4e6b06cca9304984c9484769b2fc7fc22)  
**pr**         : [39172](https://github.com/envoyproxy/envoy/pull/39172) [39226](https://github.com/envoyproxy/envoy/pull/39226)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.internal_authority_header_validator`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http  
**summary**    : http: deprecate envoy_reloadable_features_internal_authority_header_validator (#39226)  
**summary**    : http: Removed runtime guard envoy_reloadable_features_filter_access_loggers_first (#39172)  
**commit**     : [d1f228d4e6b06cca9304984c9484769b2fc7fc22](https://github.com/envoyproxy/envoy/commit/d1f228d4e6b06cca9304984c9484769b2fc7fc22) [af026910b820e7d461a65e6c3f07ac0353ec76a8](https://github.com/envoyproxy/envoy/commit/af026910b820e7d461a65e6c3f07ac0353ec76a8)  
**pr**         : [39226](https://github.com/envoyproxy/envoy/pull/39226) [39172](https://github.com/envoyproxy/envoy/pull/39172)  
**description**:  
Removed runtime guard ``envoy_reloadable_features_filter_access_loggers_first`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : tcp_proxy  
**summary**    : tcp_proxy: remove runtime tcp_tunneling_send_downstream_fin_on_upstream_trailers (#39179)  
**commit**     : [e5232764d86d03e56b58407e37536becfd08e472](https://github.com/envoyproxy/envoy/commit/e5232764d86d03e56b58407e37536becfd08e472)  
**pr**         : [39179](https://github.com/envoyproxy/envoy/pull/39179)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.tcp_tunneling_send_downstream_fin_on_upstream_trailers`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : runtime  
**summary**    : runtime: Removed runtime guard envoy_reloadable_features_boolean_to_string_fix (#39171)  
**commit**     : [2b0f79440cd790ecc8a014cfc7dce1ef4000b707](https://github.com/envoyproxy/envoy/commit/2b0f79440cd790ecc8a014cfc7dce1ef4000b707)  
**pr**         : [39171](https://github.com/envoyproxy/envoy/pull/39171)  
**description**:  
Removed runtime guard ``envoy_reloadable_features_boolean_to_string_fix`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : logging  
**summary**    : runtime: remove runtime envoy.reloadable_features.logging_with_fast_json_formatter (#39356)  
**commit**     : [ca8330accefc0ad3038d6067e7384ad7d366e3ce](https://github.com/envoyproxy/envoy/commit/ca8330accefc0ad3038d6067e7384ad7d366e3ce)  
**pr**         : [39356](https://github.com/envoyproxy/envoy/pull/39356)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.logging_with_fast_json_formatter`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : sni  
**summary**    : Remove deprecated runtime flag use_route_host_mutation_for_auto_sni_san (#39190)  
**commit**     : [1a5d13b94d19ef95c87176eaef4737a9953fcf8b](https://github.com/envoyproxy/envoy/commit/1a5d13b94d19ef95c87176eaef4737a9953fcf8b)  
**pr**         : [39190](https://github.com/envoyproxy/envoy/pull/39190)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.use_route_host_mutation_for_auto_sni_san`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : ext_proc  
**summary**    : ext_proc: removed ext_proc_timeout_error runtime guard to always return GatewayTimeout (#39217)  
**commit**     : [a66f9c31708ad2f570aa697c6f117069715f77ce](https://github.com/envoyproxy/envoy/commit/a66f9c31708ad2f570aa697c6f117069715f77ce)  
**pr**         : [39217](https://github.com/envoyproxy/envoy/pull/39217)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.ext_proc_timeout_error`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : quic  
**summary**    : runtime: Remove extend_h3_accept_untrusted and legacy code paths (#39218)  
**commit**     : [b6df9719eb938b4c42e670559e32adcaff633a1c](https://github.com/envoyproxy/envoy/commit/b6df9719eb938b4c42e670559e32adcaff633a1c)  
**pr**         : [39218](https://github.com/envoyproxy/envoy/pull/39218)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.extend_h3_accept_untrusted`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : lua  
**summary**    : lua: Remove runtime guard envoy.reloadable_features.lua_flow_control_while_http_call (#39234)  
**commit**     : [378e21ba2f7c0216aed2c91bed1fe0a217553520](https://github.com/envoyproxy/envoy/commit/378e21ba2f7c0216aed2c91bed1fe0a217553520)  
**pr**         : [39234](https://github.com/envoyproxy/envoy/pull/39234)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.lua_flow_control_while_http_call`` and legacy code paths.   
 
---

**category**   : removed_config_or_runtime  
**area**       : http1  
**summary**    : http1: Remove BalsaParser runtime flag (#40134)  
**commit**     : [0d84e1a182adba9360a7d5405cabcc3fbd4b6320](https://github.com/envoyproxy/envoy/commit/0d84e1a182adba9360a7d5405cabcc3fbd4b6320)  
**pr**         : [40134](https://github.com/envoyproxy/envoy/pull/40134)  
**description**:  
Removed runtime guard ``envoy.reloadable_features.envoy_reloadable_features_http1_use_balsa_parser`` and legacy code paths.   
 
---

## new_features

**category**   : new_features  
**area**       : build  
**summary**    : changelog: Add a note about upgrade to C++20 (#40049)  
**commit**     : [1b2fece5759cc390d9a2d3284b37eeacb722d027](https://github.com/envoyproxy/envoy/commit/1b2fece5759cc390d9a2d3284b37eeacb722d027)  
**pr**         : [40049](https://github.com/envoyproxy/envoy/pull/40049)  
**description**:  
Upgraded Envoy to build with C++20; Envoy developers can use C++20 features now.   
 
---

**category**   : new_features  
**area**       : redis  
**summary**    : redis_proxy: Add support for SCAN and INFO (#39702)  
**summary**    : redis_proxy: Add support for ROLE (#39937)  
**commit**     : [ed6e9d9fc842f46724bbb7e49276b0d3f9f13460](https://github.com/envoyproxy/envoy/commit/ed6e9d9fc842f46724bbb7e49276b0d3f9f13460) [f3f1a2faadeeef60b331b1d1974b4c0929320ceb](https://github.com/envoyproxy/envoy/commit/f3f1a2faadeeef60b331b1d1974b4c0929320ceb)  
**pr**         : [39702](https://github.com/envoyproxy/envoy/pull/39702) [39937](https://github.com/envoyproxy/envoy/pull/39937)  
**description**:  
Added support for ``SCAN``, ``INFO`` and ``ROLE``.   
 
---

**category**   : new_features  
**area**       : http  
**summary**    : add x-envoy-original-host to keep original host (#39617)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [4453ce1f809ec502fb2cbe0363cf5c6a971f3836](https://github.com/envoyproxy/envoy/commit/4453ce1f809ec502fb2cbe0363cf5c6a971f3836) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39617](https://github.com/envoyproxy/envoy/pull/39617) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Added [x]() that is used to record the original host header value before it is mutated by the router filter.   
 
---

**category**   : new_features  
**area**       : stateful_session  
**summary**    : stateful session: new envelope stateful session extension (#39004)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [eb0aa190bdd1a9862653d724eb94086d31f486f9](https://github.com/envoyproxy/envoy/commit/eb0aa190bdd1a9862653d724eb94086d31f486f9) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39004](https://github.com/envoyproxy/envoy/pull/39004) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Support for envelope stateful session extension to keep the existing session header value from upstream server. See [mode](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/http/stateful_session/envelope/v3/envelope.proto.html#envoy-v3-api-msg-extensions-http-stateful-session-envelope-v3-envelopesessionstate) for more details.   
 
---

**category**   : new_features  
**area**       : transport_tap  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**summary**    : Tap/Transport tap Enhance buffer trace to send tapped messages based on configured size (#39540)  
**commit**     : [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833) [25037e74fcd73c65991aac8c3a19efc7db7ede86](https://github.com/envoyproxy/envoy/commit/25037e74fcd73c65991aac8c3a19efc7db7ede86)  
**pr**         : [40219](https://github.com/envoyproxy/envoy/pull/40219) [39540](https://github.com/envoyproxy/envoy/pull/39540)  
**description**:  
Added counter in transport tap for streaming and buffer trace. Streamed trace can send tapped message based on configured size.   
 
---

**category**   : new_features  
**area**       : udp_sink  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**summary**    : Tap/contrib/udp_sink  Enhance udp sink to support the single message which the size is bigger than 64K (#40073)  
**commit**     : [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833) [b9f34b14ef14406f88c66b0afed0eb1e833b82ea](https://github.com/envoyproxy/envoy/commit/b9f34b14ef14406f88c66b0afed0eb1e833b82ea)  
**pr**         : [40219](https://github.com/envoyproxy/envoy/pull/40219) [40073](https://github.com/envoyproxy/envoy/pull/40073)  
**description**:  
Enhanced UDP sink to support a single message whose size is bigger than 64 KB.   
 
---

**category**   : new_features  
**area**       : load_balancing  
**summary**    : Dynamic forwarding load balancing policy (#38757)  
**commit**     : [1e5bbb5b53f00c99d7068bc59b4e7fcaeb8d03f1](https://github.com/envoyproxy/envoy/commit/1e5bbb5b53f00c99d7068bc59b4e7fcaeb8d03f1)  
**pr**         : [38757](https://github.com/envoyproxy/envoy/pull/38757)  
**description**:  
Added Override Host Load Balancing policy. See [load]() for more details.   
 
---

**category**   : new_features  
**area**       : load_balancing  
**summary**    : lb: hash policy support in the hash lb (#39505)  
**commit**     : [68998d38e5b084aa2af657bba1bed873f9de270f](https://github.com/envoyproxy/envoy/commit/68998d38e5b084aa2af657bba1bed873f9de270f)  
**pr**         : [39505](https://github.com/envoyproxy/envoy/pull/39505)  
**description**:  
Added [hash]() to the ring hash and maglev load balancing policies. If the hash policy in the load balancer is configured, the [route]() will be ignored.   
 
---

**category**   : new_features  
**area**       : lua  
**summary**    : lua: filter context implementation (#39263)  
**commit**     : [7e8f7fae0a44570c9033e250056078dfde92d201](https://github.com/envoyproxy/envoy/commit/7e8f7fae0a44570c9033e250056078dfde92d201)  
**pr**         : [39263](https://github.com/envoyproxy/envoy/pull/39263)  
**description**:  
Added support for accessing filter context. See [filterContext]() for more details.   
 
---

**category**   : new_features  
**area**       : resource_monitors  
**summary**    : Add cgroup memory resource monitor (#39053)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [f5063a6060621f71b12bded466e6187522283b06](https://github.com/envoyproxy/envoy/commit/f5063a6060621f71b12bded466e6187522283b06) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39053](https://github.com/envoyproxy/envoy/pull/39053) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Added new cgroup memory resource monitor that reads memory usage/limit from cgroup v1/v2 subsystems and calculates memory pressure, with configurable ``max_memory_bytes`` limit [existing]().   
 
---

**category**   : new_features  
**area**       : ext_authz  
**summary**    : ext_authz: Add grpc status to ExtAuthzLoggingInfo in ext authz http filter (#39144)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [9327966031c511376f5b6144061265beaf8d67aa](https://github.com/envoyproxy/envoy/commit/9327966031c511376f5b6144061265beaf8d67aa) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39144](https://github.com/envoyproxy/envoy/pull/39144) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Added ``grpc_status`` to ``ExtAuthzLoggingInfo`` in ``ext_authz`` HTTP filter.   
 
---

**category**   : new_features  
**area**       : http  
**summary**    : (header_mutation): support mutating trailers (#39433)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [61f29cb44964f98fbd62f37d139c74b06fe87ecb](https://github.com/envoyproxy/envoy/commit/61f29cb44964f98fbd62f37d139c74b06fe87ecb) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39433](https://github.com/envoyproxy/envoy/pull/39433) [40219](https://github.com/envoyproxy/envoy/pull/40219) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Added [response]() and [request]() to [Header]() for adding/removing trailers from the request and the response.   
 
---

**category**   : new_features  
**area**       : postgres  
**summary**    : postgres: support require downstream ssl (#39431)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [412bfa4ea4e4216eef9e82dcd2c49f5bf7765a5a](https://github.com/envoyproxy/envoy/commit/412bfa4ea4e4216eef9e82dcd2c49f5bf7765a5a) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39431](https://github.com/envoyproxy/envoy/pull/39431) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added support for requiring downstream SSL.   
 
---

**category**   : new_features  
**area**       : url_template  
**summary**    : uri_template: Add support for the "*" character matching in pattern rewrite and matching (#39169)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [59c6863f8aac8a0a4287d0c44ca8edede5def64c](https://github.com/envoyproxy/envoy/commit/59c6863f8aac8a0a4287d0c44ca8edede5def64c) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39169](https://github.com/envoyproxy/envoy/pull/39169) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Included the asterisk ``*`` in the match pattern when using the ``*`` or ``**`` operators in the URL template. This behavioral change can be temporarily reverted by setting runtime guard ``envoy.reloadable_features.uri_template_match_on_asterisk`` to ``false``.   
 
---

**category**   : new_features  
**area**       : socket  
**summary**    : listener: Support for Linux network namespaces (#39517)  
**commit**     : [d1723fdfb90372e4a8c05fdc33039560c371e666](https://github.com/envoyproxy/envoy/commit/d1723fdfb90372e4a8c05fdc33039560c371e666)  
**pr**         : [39517](https://github.com/envoyproxy/envoy/pull/39517)  
**description**:  
Added ``network_namespace_filepath`` to ``SocketAddress``. Currently only used by listeners.   
 
---

**category**   : new_features  
**area**       : rbac_filter  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**summary**    : rbac: allowlist FilterStateInput for xDS matcher in HTTP RBAC (#39462)  
**commit**     : [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833) [e9cc5bac98c9790a2ae28cff4e3b6a6aaf83a2e6](https://github.com/envoyproxy/envoy/commit/e9cc5bac98c9790a2ae28cff4e3b6a6aaf83a2e6)  
**pr**         : [40219](https://github.com/envoyproxy/envoy/pull/40219) [39462](https://github.com/envoyproxy/envoy/pull/39462)  
**description**:  
Allow-listed ``FilterStateInput`` to be used with the xDS matcher in the HTTP RBAC filter.   
 
---

**category**   : new_features  
**area**       : rbac_filter  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**summary**    : rbac: allowlist FilterStateInput for xDS matcher in Network RBAC (#39467)  
**commit**     : [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833) [8aea316b0283c76dc9a17f94b4910006e7e8be70](https://github.com/envoyproxy/envoy/commit/8aea316b0283c76dc9a17f94b4910006e7e8be70)  
**pr**         : [40219](https://github.com/envoyproxy/envoy/pull/40219) [39467](https://github.com/envoyproxy/envoy/pull/39467)  
**description**:  
Allow-listed ``FilterStateInput`` to be used with the xDS matcher in the Network RBAC filter.   
 
---

**category**   : new_features  
**area**       : tls_inspector_filter  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**summary**    : tls_inspector: implement JA4 fingerprinting (#39430)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833) [850d26745a4c3c72f131f69448cea3a23957134e](https://github.com/envoyproxy/envoy/commit/850d26745a4c3c72f131f69448cea3a23957134e) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [40219](https://github.com/envoyproxy/envoy/pull/40219) [39430](https://github.com/envoyproxy/envoy/pull/39430) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Added [enable_ja4_fingerprinting](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/listener/tls_inspector/v3/tls_inspector.proto.html#envoy-v3-api-field-extensions-filters-listener-tls-inspector-v3-tlsinspector-enable-ja4-fingerprinting) to create a JA4 fingerprint hash from the Client Hello message.   
 
---

**category**   : new_features  
**area**       : local_ratelimit  
**summary**    : local_ratelimit: support return `x-ratelimit-reset` header (#39501)  
**commit**     : [a40cebe43ac63a6a288ceace5e519a090a1cf7cf](https://github.com/envoyproxy/envoy/commit/a40cebe43ac63a6a288ceace5e519a090a1cf7cf)  
**pr**         : [39501](https://github.com/envoyproxy/envoy/pull/39501)  
**description**:  
``local_ratelimit`` will return ``x-ratelimit-reset`` header when the rate limit is exceeded.   
 
---

**category**   : new_features  
**area**       : oauth2  
**summary**    : OAuth2: RP initiated logout (#39374)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [c12fefc11f7adc9cd404287eb674ba838c2c8bd0](https://github.com/envoyproxy/envoy/commit/c12fefc11f7adc9cd404287eb674ba838c2c8bd0) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39374](https://github.com/envoyproxy/envoy/pull/39374) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Added [end_session_endpoint](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-end-session-endpoint) to the ``oauth2`` filter to support OIDC RP initiated logout. This field is only used when ``openid`` is in the [auth_scopes](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-auth-scopes) field. If configured, the OAuth2 filter will redirect users to this endpoint when they access the [signout_path](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-signout-path). This allows users to be logged out of the Authorization server.   
 
---

**category**   : new_features  
**area**       : tcp_access_logs  
**summary**    : tcp_proxy: account upstream bytes meter for tunneling flows (#40040)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [9f079921eaf040aec877d6e3ccd950954ecbd73d](https://github.com/envoyproxy/envoy/commit/9f079921eaf040aec877d6e3ccd950954ecbd73d) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [40040](https://github.com/envoyproxy/envoy/pull/40040) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added support for ``%BYTES_RECEIVED%``, ``%BYTES_SENT%``, ``%UPSTREAM_HEADER_BYTES_SENT%``, ``%UPSTREAM_HEADER_BYTES_RECEIVED%``, ``%UPSTREAM_WIRE_BYTES_SENT%``, ``%UPSTREAM_WIRE_BYTES_RECEIVED%`` access log substitution strings for TCP tunneling flows.   
 
---

**category**   : new_features  
**area**       : oauth2  
**summary**    : oauth2: make CSRF and code verifier token expiration configurable (#39877)  
**commit**     : [d7a588d5ccdfd9bcccad57dd9b764683017e0da1](https://github.com/envoyproxy/envoy/commit/d7a588d5ccdfd9bcccad57dd9b764683017e0da1)  
**pr**         : [39877](https://github.com/envoyproxy/envoy/pull/39877)  
**description**:  
Added configurable [csrf_token_expires_in](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-csrf-token-expires-in) and [code_verifier_token_expires_in](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-code-verifier-token-expires-in) fields to the ``oauth2`` filter. Both default to ``600s`` (10 minutes) if not specified, keeping backward compatibility.   
 
---

**category**   : new_features  
**area**       : load_shed_point  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**summary**    : conn pool: added a new load shed when creating new connections to upstream (#39685)  
**commit**     : [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833) [a13e2491dc88fe1b3ad3782d6088999e448088f0](https://github.com/envoyproxy/envoy/commit/a13e2491dc88fe1b3ad3782d6088999e448088f0)  
**pr**         : [40219](https://github.com/envoyproxy/envoy/pull/40219) [39685](https://github.com/envoyproxy/envoy/pull/39685)  
**description**:  
Added load shed point ``envoy.load_shed_points.connection_pool_new_connection`` in the connection pool, and it will not create new connections when Envoy is under pressure, and the pending downstream requests will be cancelled.   
 
---

**category**   : new_features  
**area**       : api_key_auth  
**summary**    : implement forwarding configuration in API Key Auth filter (#39763)  
**summary**    : changelog: fix typos in the current changelogs (#39819)  
**commit**     : [6cec852bcd373d29700039b00b802ef71bbfc80a](https://github.com/envoyproxy/envoy/commit/6cec852bcd373d29700039b00b802ef71bbfc80a) [3ba257fb97915b59a53c6246f9a289993bf6e9f0](https://github.com/envoyproxy/envoy/commit/3ba257fb97915b59a53c6246f9a289993bf6e9f0)  
**pr**         : [39763](https://github.com/envoyproxy/envoy/pull/39763) [39819](https://github.com/envoyproxy/envoy/pull/39819)  
**description**:  
Added [forwarding]() to the API Key Auth filter, which allows forwarding the authenticated client identity using a custom header, and also offers the option to remove the API key from the request before forwarding.   
 
---

**category**   : new_features  
**area**       : lua  
**summary**    : lua: adds typedMetadata() on connectionStreamInfo() (#39506)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [dc076aa085e72ae8953a340ab9c51fad5de423e4](https://github.com/envoyproxy/envoy/commit/dc076aa085e72ae8953a340ab9c51fad5de423e4) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39506](https://github.com/envoyproxy/envoy/pull/39506) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added a new ``dynamicTypedMetadata()`` on ``connectionStreamInfo()`` which can be used to access the typed metadata from network filters, such as the Proxy Protocol, etc.   
 
---

**category**   : new_features  
**area**       : aws  
**summary**    : aws: Implementation of IAM Roles anywhere support in aws request signing - part 3 (#39521)  
**commit**     : [1ed3da6fe3c72d15008d8abb110573db3b3e5091](https://github.com/envoyproxy/envoy/commit/1ed3da6fe3c72d15008d8abb110573db3b3e5091)  
**pr**         : [39521](https://github.com/envoyproxy/envoy/pull/39521)  
**description**:  
Implementation of `IAM Roles Anywhere support <https://docs.aws.amazon.com/rolesanywhere/latest/userguide/introduction.html>`_ in the AWS common components, providing this capability to the AWS Lambda and AWS Request Signing extensions.   
 
---

**category**   : new_features  
**area**       : redis  
**summary**    : redis: implement AWS IAM authentication (#39645)  
**commit**     : [48fff0217727f669aa5df1186dd8bbbe1c620b9f](https://github.com/envoyproxy/envoy/commit/48fff0217727f669aa5df1186dd8bbbe1c620b9f)  
**pr**         : [39645](https://github.com/envoyproxy/envoy/pull/39645)  
**description**:  
``redis_proxy`` filter now supports AWS IAM Authentication.   
 
---

**category**   : new_features  
**area**       : router  
**summary**    : router: complete the new matcher based cluster specifier (#39816)  
**commit**     : [f19cadd4ead6166cc22b5d225d4719e25e50be45](https://github.com/envoyproxy/envoy/commit/f19cadd4ead6166cc22b5d225d4719e25e50be45)  
**pr**         : [39816](https://github.com/envoyproxy/envoy/pull/39816)  
**description**:  
Added matcher based router cluster specifier plugin to support selecting cluster dynamically based on a matcher tree. See [matcher]() for more details.   
 
---

**category**   : new_features  
**area**       : router  
**summary**    : refresh cluster: to support cluster refreshment  (#39925)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [366ebcd1fab5f49bef83a08b8362ca0f398d8785](https://github.com/envoyproxy/envoy/commit/366ebcd1fab5f49bef83a08b8362ca0f398d8785) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39925](https://github.com/envoyproxy/envoy/pull/39925) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added new ``refreshRouteCluster()`` method to stream filter callbacks to support refreshing the route cluster and does not need to update the route cache. See [http]() for more details.   
 
---

**category**   : new_features  
**area**       : lua  
**summary**    : lua: adds dynamicTypedMetadata() on streamInfo() (#39820)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [1bbc404f3d3aef20e039fe412cdecf6e0200734e](https://github.com/envoyproxy/envoy/commit/1bbc404f3d3aef20e039fe412cdecf6e0200734e) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39820](https://github.com/envoyproxy/envoy/pull/39820) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added a new ``dynamicTypedMetadata()`` on ``streamInfo()`` which can be used to access the typed metadata from HTTP filters, such as the Set Metadata filter, etc.   
 
---

**category**   : new_features  
**area**       : ratelimit  
**summary**    : http rate limit filter v3: add support for failure_mode_deny runtime overrides (#39942)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [3eaa1d5ce7d3f932fb8d5eaad80d43ea653e9dbc](https://github.com/envoyproxy/envoy/commit/3eaa1d5ce7d3f932fb8d5eaad80d43ea653e9dbc) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39942](https://github.com/envoyproxy/envoy/pull/39942) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added a new ``failure_mode_deny_percent`` field of type ``Envoy::Runtime::FractionalPercent`` attached to the rate limit filter to configure the failure mode for rate limit service errors in runtime. It acts as an override for the existing ``failure_mode_deny`` field in the filter config.   
 
---

**category**   : new_features  
**area**       : tls  
**summary**    : tls: Emit metric for seconds since UNIX epoch of expiration for loaded certs (#27687)  
**commit**     : [01dd1c836f89ce9fa6cb6e538f0203cde9d64d84](https://github.com/envoyproxy/envoy/commit/01dd1c836f89ce9fa6cb6e538f0203cde9d64d84)  
**pr**         : [27687](https://github.com/envoyproxy/envoy/pull/27687)  
**description**:  
Added new metric for emitting seconds since UNIX epoch of expirations of TLS and CA certificates. They are rooted at ``cluster.<cluster_name>.ssl.certificate.<cert_name>.`` and at ``listener.<address>.ssl.certificate.<cert_name>.`` namespace.   
 
---

**category**   : new_features  
**area**       : ext_proc  
**summary**    : ext_proc: add `failure_mode_allow` per route override (#40014)  
**commit**     : [58fce3a7c8b585fd4bfd463497b8dc8a311c46ab](https://github.com/envoyproxy/envoy/commit/58fce3a7c8b585fd4bfd463497b8dc8a311c46ab)  
**pr**         : [40014](https://github.com/envoyproxy/envoy/pull/40014)  
**description**:  
The [failure_mode_allow](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-failure-mode-allow) setting may now be overridden on a per-route basis.   
 
---

**category**   : new_features  
**area**       : matcher  
**summary**    : matcher: add implementation for ServerNameMatcher (#39884)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [4b97f72d3be946a1f0a5e5525c493bd8aac93c66](https://github.com/envoyproxy/envoy/commit/4b97f72d3be946a1f0a5e5525c493bd8aac93c66) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [39884](https://github.com/envoyproxy/envoy/pull/39884) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added support for [ServerNameMatcher](https://www.envoyproxy.io/docs/envoy/v1.35.0/xds/type/matcher/v3/domain.proto.html#envoy-v3-api-msg-xds-type-matcher-v3-servernamematcher) trie-based matching.   
 
---

**category**   : new_features  
**area**       : stateful_session  
**summary**    : Support attributes in stateful session cookies (#40084)  
**commit**     : [39339150a76959fac0ef47b85441f38fe27d061c](https://github.com/envoyproxy/envoy/commit/39339150a76959fac0ef47b85441f38fe27d061c)  
**pr**         : [40084](https://github.com/envoyproxy/envoy/pull/40084)  
**description**:  
Added support for cookie attributes to stateful session cookie.   
 
---

**category**   : new_features  
**area**       : http3  
**summary**    : Add an option to disable connection flow control for HTTP/3 stream (#40129)  
**summary**    : changelog: fix typos in the current changelogs and clean them up (#40219)  
**commit**     : [9ba9a1b59773b13f9a6c2bd936034300c1fb47bf](https://github.com/envoyproxy/envoy/commit/9ba9a1b59773b13f9a6c2bd936034300c1fb47bf) [6f258de5ce1b01a64b3f7d79299cdf0afff49833](https://github.com/envoyproxy/envoy/commit/6f258de5ce1b01a64b3f7d79299cdf0afff49833)  
**pr**         : [40129](https://github.com/envoyproxy/envoy/pull/40129) [40219](https://github.com/envoyproxy/envoy/pull/40219)  
**description**:  
Added [disable_connection_flow_control_for_streams](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-http3protocoloptions-disable-connection-flow-control-for-streams), an experimental option for disabling connection level flow control for streams. This is useful in situations where the streams share the same connection but originate from different end-clients, so that each stream can make progress independently at non-front-line proxies.   
 
---

**category**   : new_features  
**area**       : dfp  
**summary**    : dfp: add support for DFP honoring dynamic_host filter state when configured (#39605)  
**commit**     : [877b9824370232745db11cf65417b8d88b4d38c5](https://github.com/envoyproxy/envoy/commit/877b9824370232745db11cf65417b8d88b4d38c5)  
**pr**         : [39605](https://github.com/envoyproxy/envoy/pull/39605)  
**description**:  
Added [allow_dynamic_host_from_filter_state](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/filters/http/dynamic_forward_proxy/v3/dynamic_forward_proxy.proto.html#envoy-v3-api-field-extensions-filters-http-dynamic-forward-proxy-v3-filterconfig-allow-dynamic-host-from-filter-state) flag to HTTP Dynamic Forward Proxy filter. When enabled, the filter will check for ``envoy.upstream.dynamic_host`` and ``envoy.upstream.dynamic_port`` filter state values before using the HTTP Host header, providing consistency with SNI and UDP DFP filters. When disabled (default), maintains backward compatibility by using the HTTP Host header directly.   
 
---

**category**   : new_features  
**area**       : alts  
**summary**    : Add keepalive params to Envoy alts transport socket (#40195)  
**commit**     : [86b1f309ece977ce3b35cc60d23c94383a1bb045](https://github.com/envoyproxy/envoy/commit/86b1f309ece977ce3b35cc60d23c94383a1bb045)  
**pr**         : [40195](https://github.com/envoyproxy/envoy/pull/40195)  
**description**:  
Added environment variable-protected gRPC keepalive params to the ALTS handshaker client.   
 
---

**category**   : new_features  
**area**       : wasm  
**summary**    : wasm: add config setting to control StopIteration behavior (#40213)  
**commit**     : [274d68f02971c1cf0da1628991126e8ebd307d25](https://github.com/envoyproxy/envoy/commit/274d68f02971c1cf0da1628991126e8ebd307d25)  
**pr**         : [40213](https://github.com/envoyproxy/envoy/pull/40213)  
**description**:  
Added support for returning ``StopIteration`` from plugin ``onRequestHeader`` and ``onResponseHeader`` callbacks. See [allow_on_headers_stop_iteration](https://www.envoyproxy.io/docs/envoy/v1.35.0/api-v3/extensions/wasm/v3/wasm.proto.html#envoy-v3-api-field-extensions-wasm-v3-pluginconfig-allow-on-headers-stop-iteration) for more details. By default, current behavior is maintained.   
 
---

**category**   : new_features  
**area**       : aws  
**summary**    : aws: Implementation of assumeroleprovider (#39610)  
**commit**     : [c5f37fde4a7a5910e4426c58b614b1d79fa137b2](https://github.com/envoyproxy/envoy/commit/c5f37fde4a7a5910e4426c58b614b1d79fa137b2)  
**pr**         : [39610](https://github.com/envoyproxy/envoy/pull/39610)  
**description**:  
Added ``assume_role_credential_provider`` to add support for role chaining in AWS filters. This allows envoy to assume an additional role before SigV4 signing occurs.   
 
---

